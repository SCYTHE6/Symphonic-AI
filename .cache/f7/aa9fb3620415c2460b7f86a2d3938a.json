{"id":"fst5","dependencies":[{"name":"C:\\Github\\Symphonic-AI\\node_modules\\pixi.js\\lib\\core\\sprites\\webgl\\generateMultiTextureShader.js.map","includedInParent":true,"mtime":1674916212992},{"name":"C:\\Github\\Symphonic-AI\\package.json","includedInParent":true,"mtime":1724703272135},{"name":"C:\\Github\\Symphonic-AI\\node_modules\\pixi.js\\package.json","includedInParent":true,"mtime":1674916212608},{"name":"../../Shader","loc":{"line":6,"column":22,"index":111},"parent":"C:\\Github\\Symphonic-AI\\node_modules\\pixi.js\\lib\\core\\sprites\\webgl\\generateMultiTextureShader.js","resolved":"C:\\Github\\Symphonic-AI\\node_modules\\pixi.js\\lib\\core\\Shader.js"},{"name":"path","loc":{"line":10,"column":20,"index":198},"parent":"C:\\Github\\Symphonic-AI\\node_modules\\pixi.js\\lib\\core\\sprites\\webgl\\generateMultiTextureShader.js","resolved":"C:\\Github\\Symphonic-AI\\node_modules\\path-browserify\\index.js"}],"generated":{"js":"\"use strict\";exports.__esModule=!0,exports.default=a;var r=require(\"../../Shader\"),e=t(r),o=require(\"path\");function t(r){return r&&r.__esModule?r:{default:r}}var n=[\"varying vec2 vTextureCoord;\",\"varying vec4 vColor;\",\"varying float vTextureId;\",\"uniform sampler2D uSamplers[%count%];\",\"void main(void){\",\"vec4 color;\",\"float textureId = floor(vTextureId+0.5);\",\"%forloop%\",\"gl_FragColor = color * vColor;\",\"}\"].join(\"\\n\");function a(r,o){var t=n;t=(t=t.replace(/%count%/gi,o)).replace(/%forloop%/gi,i(o));for(var a=new e.default(r,\"precision highp float;\\nattribute vec2 aVertexPosition;\\nattribute vec2 aTextureCoord;\\nattribute vec4 aColor;\\nattribute float aTextureId;\\n\\nuniform mat3 projectionMatrix;\\n\\nvarying vec2 vTextureCoord;\\nvarying vec4 vColor;\\nvarying float vTextureId;\\n\\nvoid main(void){\\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\\n\\n    vTextureCoord = aTextureCoord;\\n    vTextureId = aTextureId;\\n    vColor = aColor;\\n}\\n\",t),u=[],v=0;v<o;v++)u[v]=v;return a.bind(),a.uniforms.uSamplers=u,a}function i(r){var e=\"\";e+=\"\\n\",e+=\"\\n\";for(var o=0;o<r;o++)o>0&&(e+=\"\\nelse \"),o<r-1&&(e+=\"if(textureId == \"+o+\".0)\"),e+=\"\\n{\",e+=\"\\n\\tcolor = texture2D(uSamplers[\"+o+\"], vTextureCoord);\",e+=\"\\n}\";return e+=\"\\n\",e+=\"\\n\"}"},"sourceMaps":{"js":{"mappings":[{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"generateMultiTextureShader","original":{"line":19,"column":24},"generated":{"line":1,"column":51}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":53}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":57}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":59}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":67}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":90}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":92}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":100}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":159}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"fragTemplate","original":{"line":5,"column":6},"generated":{"line":1,"column":163}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":5,"column":21},"generated":{"line":1,"column":165}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":6,"column":4},"generated":{"line":1,"column":166}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":7,"column":4},"generated":{"line":1,"column":196}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":8,"column":4},"generated":{"line":1,"column":219}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":9,"column":4},"generated":{"line":1,"column":247}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":11,"column":4},"generated":{"line":1,"column":287}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":12,"column":4},"generated":{"line":1,"column":306}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":13,"column":4},"generated":{"line":1,"column":320}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":14,"column":4},"generated":{"line":1,"column":363}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":15,"column":4},"generated":{"line":1,"column":375}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":16,"column":4},"generated":{"line":1,"column":408}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"join","original":{"line":17,"column":2},"generated":{"line":1,"column":413}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":17,"column":7},"generated":{"line":1,"column":418}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":19,"column":15},"generated":{"line":1,"column":424}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"generateMultiTextureShader","original":{"line":19,"column":24},"generated":{"line":1,"column":433}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"gl","original":{"line":19,"column":51},"generated":{"line":1,"column":435}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"maxTextures","original":{"line":19,"column":55},"generated":{"line":1,"column":437}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":21,"column":4},"generated":{"line":1,"column":440}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"fragmentSrc","original":{"line":22,"column":8},"generated":{"line":1,"column":444}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"fragTemplate","original":{"line":22,"column":22},"generated":{"line":1,"column":446}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"fragmentSrc","original":{"line":25,"column":4},"generated":{"line":1,"column":448}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"fragmentSrc","original":{"line":24,"column":4},"generated":{"line":1,"column":451}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"fragmentSrc","original":{"line":24,"column":18},"generated":{"line":1,"column":453}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"replace","original":{"line":24,"column":30},"generated":{"line":1,"column":455}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":24,"column":38},"generated":{"line":1,"column":463}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"maxTextures","original":{"line":24,"column":51},"generated":{"line":1,"column":475}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"replace","original":{"line":25,"column":30},"generated":{"line":1,"column":479}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":25,"column":38},"generated":{"line":1,"column":487}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"generateSampleSrc","original":{"line":25,"column":53},"generated":{"line":1,"column":501}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"maxTextures","original":{"line":25,"column":71},"generated":{"line":1,"column":503}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":31,"column":4},"generated":{"line":1,"column":507}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":27,"column":4},"generated":{"line":1,"column":511}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"shader","original":{"line":27,"column":10},"generated":{"line":1,"column":515}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":27,"column":19},"generated":{"line":1,"column":517}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":27,"column":19},"generated":{"line":1,"column":521}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":27,"column":19},"generated":{"line":1,"column":523}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"gl","original":{"line":27,"column":30},"generated":{"line":1,"column":531}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"vertexSrc","original":{"line":21,"column":10},"generated":{"line":1,"column":533}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"fragmentSrc","original":{"line":27,"column":45},"generated":{"line":1,"column":991}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"sampleValues","original":{"line":29,"column":10},"generated":{"line":1,"column":994}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":29,"column":25},"generated":{"line":1,"column":996}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"i","original":{"line":31,"column":13},"generated":{"line":1,"column":999}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":31,"column":17},"generated":{"line":1,"column":1001}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"i","original":{"line":31,"column":20},"generated":{"line":1,"column":1003}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"maxTextures","original":{"line":31,"column":24},"generated":{"line":1,"column":1005}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"i","original":{"line":31,"column":37},"generated":{"line":1,"column":1007}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"sampleValues","original":{"line":33,"column":8},"generated":{"line":1,"column":1011}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"i","original":{"line":33,"column":21},"generated":{"line":1,"column":1013}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"i","original":{"line":33,"column":26},"generated":{"line":1,"column":1016}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":39,"column":4},"generated":{"line":1,"column":1018}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"shader","original":{"line":36,"column":4},"generated":{"line":1,"column":1025}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"bind","original":{"line":36,"column":11},"generated":{"line":1,"column":1027}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"shader","original":{"line":37,"column":4},"generated":{"line":1,"column":1034}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"uniforms","original":{"line":37,"column":11},"generated":{"line":1,"column":1036}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"uSamplers","original":{"line":37,"column":20},"generated":{"line":1,"column":1045}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"sampleValues","original":{"line":37,"column":32},"generated":{"line":1,"column":1055}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"shader","original":{"line":39,"column":11},"generated":{"line":1,"column":1057}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":42,"column":0},"generated":{"line":1,"column":1059}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"generateSampleSrc","original":{"line":42,"column":9},"generated":{"line":1,"column":1068}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"maxTextures","original":{"line":42,"column":27},"generated":{"line":1,"column":1070}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":44,"column":4},"generated":{"line":1,"column":1073}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"src","original":{"line":44,"column":8},"generated":{"line":1,"column":1077}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":44,"column":14},"generated":{"line":1,"column":1079}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"src","original":{"line":46,"column":4},"generated":{"line":1,"column":1082}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":46,"column":11},"generated":{"line":1,"column":1085}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"src","original":{"line":47,"column":4},"generated":{"line":1,"column":1090}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":47,"column":11},"generated":{"line":1,"column":1093}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":49,"column":4},"generated":{"line":1,"column":1098}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":49,"column":9},"generated":{"line":1,"column":1102}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"i","original":{"line":49,"column":13},"generated":{"line":1,"column":1106}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":49,"column":17},"generated":{"line":1,"column":1108}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"i","original":{"line":49,"column":20},"generated":{"line":1,"column":1110}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"maxTextures","original":{"line":49,"column":24},"generated":{"line":1,"column":1112}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"i","original":{"line":49,"column":37},"generated":{"line":1,"column":1114}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"i","original":{"line":51,"column":12},"generated":{"line":1,"column":1118}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":51,"column":16},"generated":{"line":1,"column":1120}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"src","original":{"line":53,"column":12},"generated":{"line":1,"column":1124}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":53,"column":19},"generated":{"line":1,"column":1127}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"i","original":{"line":56,"column":12},"generated":{"line":1,"column":1138}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"maxTextures","original":{"line":56,"column":16},"generated":{"line":1,"column":1140}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":56,"column":30},"generated":{"line":1,"column":1142}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"src","original":{"line":58,"column":12},"generated":{"line":1,"column":1146}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"src","original":{"line":58,"column":12},"generated":{"line":1,"column":1149}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"i","original":{"line":58,"column":38},"generated":{"line":1,"column":1168}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":58,"column":12},"generated":{"line":1,"column":1170}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"src","original":{"line":61,"column":8},"generated":{"line":1,"column":1177}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":61,"column":15},"generated":{"line":1,"column":1180}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"src","original":{"line":62,"column":8},"generated":{"line":1,"column":1186}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"src","original":{"line":62,"column":8},"generated":{"line":1,"column":1189}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"i","original":{"line":62,"column":50},"generated":{"line":1,"column":1224}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":62,"column":8},"generated":{"line":1,"column":1226}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"src","original":{"line":63,"column":8},"generated":{"line":1,"column":1247}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":63,"column":15},"generated":{"line":1,"column":1250}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":69,"column":4},"generated":{"line":1,"column":1256}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"src","original":{"line":66,"column":4},"generated":{"line":1,"column":1263}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":66,"column":11},"generated":{"line":1,"column":1266}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":"src","original":{"line":67,"column":4},"generated":{"line":1,"column":1271}},{"source":"../../../../src/core/sprites/webgl/generateMultiTextureShader.js","name":null,"original":{"line":67,"column":11},"generated":{"line":1,"column":1274}}],"sources":{"../../../../src/core/sprites/webgl/generateMultiTextureShader.js":"import Shader from '../../Shader';\nimport { readFileSync } from 'fs';\nimport { join } from 'path';\n\nconst fragTemplate = [\n    'varying vec2 vTextureCoord;',\n    'varying vec4 vColor;',\n    'varying float vTextureId;',\n    'uniform sampler2D uSamplers[%count%];',\n\n    'void main(void){',\n    'vec4 color;',\n    'float textureId = floor(vTextureId+0.5);',\n    '%forloop%',\n    'gl_FragColor = color * vColor;',\n    '}',\n].join('\\n');\n\nexport default function generateMultiTextureShader(gl, maxTextures)\n{\n    const vertexSrc = readFileSync(join(__dirname, './texture.vert'), 'utf8');\n    let fragmentSrc = fragTemplate;\n\n    fragmentSrc = fragmentSrc.replace(/%count%/gi, maxTextures);\n    fragmentSrc = fragmentSrc.replace(/%forloop%/gi, generateSampleSrc(maxTextures));\n\n    const shader = new Shader(gl, vertexSrc, fragmentSrc);\n\n    const sampleValues = [];\n\n    for (let i = 0; i < maxTextures; i++)\n    {\n        sampleValues[i] = i;\n    }\n\n    shader.bind();\n    shader.uniforms.uSamplers = sampleValues;\n\n    return shader;\n}\n\nfunction generateSampleSrc(maxTextures)\n{\n    let src = '';\n\n    src += '\\n';\n    src += '\\n';\n\n    for (let i = 0; i < maxTextures; i++)\n    {\n        if (i > 0)\n        {\n            src += '\\nelse ';\n        }\n\n        if (i < maxTextures - 1)\n        {\n            src += `if(textureId == ${i}.0)`;\n        }\n\n        src += '\\n{';\n        src += `\\n\\tcolor = texture2D(uSamplers[${i}], vTextureCoord);`;\n        src += '\\n}';\n    }\n\n    src += '\\n';\n    src += '\\n';\n\n    return src;\n}\n"},"lineCount":null}},"error":null,"hash":"82536093f29e4fb0cd4cccfc41d7ce4c","cacheData":{"env":{}}}