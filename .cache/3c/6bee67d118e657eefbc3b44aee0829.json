{"id":"bkHk","dependencies":[{"name":"C:\\Github\\Symphonic-AI\\node_modules\\resource-loader\\lib\\middlewares\\parsing\\blob.js.map","includedInParent":true,"mtime":1674916216796},{"name":"C:\\Github\\Symphonic-AI\\package.json","includedInParent":true,"mtime":1724703272135},{"name":"C:\\Github\\Symphonic-AI\\node_modules\\resource-loader\\package.json","includedInParent":true,"mtime":1674916216757},{"name":"../../Resource","loc":{"line":6,"column":24,"index":122},"parent":"C:\\Github\\Symphonic-AI\\node_modules\\resource-loader\\lib\\middlewares\\parsing\\blob.js","resolved":"C:\\Github\\Symphonic-AI\\node_modules\\resource-loader\\lib\\Resource.js"},{"name":"../../b64","loc":{"line":8,"column":17,"index":159},"parent":"C:\\Github\\Symphonic-AI\\node_modules\\resource-loader\\lib\\middlewares\\parsing\\blob.js","resolved":"C:\\Github\\Symphonic-AI\\node_modules\\resource-loader\\lib\\b64.js"}],"generated":{"js":"\"use strict\";exports.__esModule=!0,exports.blobMiddlewareFactory=o;var e=require(\"../../Resource\"),a=require(\"../../b64\"),t=window.URL||window.webkitURL;function o(){return function(o,r){if(o.data){if(o.xhr&&o.xhrType===e.Resource.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&\"string\"!=typeof o.data){if(0===o.data.type.indexOf(\"image\")){var n=t.createObjectURL(o.data);return o.blob=o.data,o.data=new Image,o.data.src=n,o.type=e.Resource.TYPE.IMAGE,void(o.data.onload=function(){t.revokeObjectURL(n),o.data.onload=null,r()})}}else{var d=o.xhr.getResponseHeader(\"content-type\");if(d&&0===d.indexOf(\"image\"))return o.data=new Image,o.data.src=\"data:\"+d+\";base64,\"+(0,a.encodeBinary)(o.xhr.responseText),o.type=e.Resource.TYPE.IMAGE,void(o.data.onload=function(){o.data.onload=null,r()})}r()}else r()}}"},"sourceMaps":{"js":{"mappings":[{"source":"../../../src/middlewares/parsing/blob.js","name":"blobMiddlewareFactory","original":{"line":7,"column":16},"generated":{"line":1,"column":43}},{"source":"../../../src/middlewares/parsing/blob.js","name":"blobMiddlewareFactory","original":{"line":7,"column":16},"generated":{"line":1,"column":65}},{"source":"../../../src/middlewares/parsing/blob.js","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":67}},{"source":"../../../src/middlewares/parsing/blob.js","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":71}},{"source":"../../../src/middlewares/parsing/blob.js","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":73}},{"source":"../../../src/middlewares/parsing/blob.js","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":81}},{"source":"../../../src/middlewares/parsing/blob.js","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":99}},{"source":"../../../src/middlewares/parsing/blob.js","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":101}},{"source":"../../../src/middlewares/parsing/blob.js","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":109}},{"source":"../../../src/middlewares/parsing/blob.js","name":"Url","original":{"line":4,"column":6},"generated":{"line":1,"column":122}},{"source":"../../../src/middlewares/parsing/blob.js","name":"window","original":{"line":4,"column":12},"generated":{"line":1,"column":124}},{"source":"../../../src/middlewares/parsing/blob.js","name":"URL","original":{"line":4,"column":19},"generated":{"line":1,"column":131}},{"source":"../../../src/middlewares/parsing/blob.js","name":"window","original":{"line":4,"column":26},"generated":{"line":1,"column":136}},{"source":"../../../src/middlewares/parsing/blob.js","name":"webkitURL","original":{"line":4,"column":33},"generated":{"line":1,"column":143}},{"source":"../../../src/middlewares/parsing/blob.js","name":null,"original":{"line":7,"column":7},"generated":{"line":1,"column":153}},{"source":"../../../src/middlewares/parsing/blob.js","name":"blobMiddlewareFactory","original":{"line":7,"column":16},"generated":{"line":1,"column":162}},{"source":"../../../src/middlewares/parsing/blob.js","name":null,"original":{"line":8,"column":4},"generated":{"line":1,"column":166}},{"source":"../../../src/middlewares/parsing/blob.js","name":null,"original":{"line":8,"column":11},"generated":{"line":1,"column":173}},{"source":"../../../src/middlewares/parsing/blob.js","name":"resource","original":{"line":8,"column":35},"generated":{"line":1,"column":182}},{"source":"../../../src/middlewares/parsing/blob.js","name":"next","original":{"line":8,"column":45},"generated":{"line":1,"column":184}},{"source":"../../../src/middlewares/parsing/blob.js","name":null,"original":{"line":9,"column":8},"generated":{"line":1,"column":187}},{"source":"../../../src/middlewares/parsing/blob.js","name":"resource","original":{"line":9,"column":13},"generated":{"line":1,"column":190}},{"source":"../../../src/middlewares/parsing/blob.js","name":"data","original":{"line":9,"column":22},"generated":{"line":1,"column":192}},{"source":"../../../src/middlewares/parsing/blob.js","name":null,"original":{"line":9,"column":8},"generated":{"line":1,"column":197}},{"source":"../../../src/middlewares/parsing/blob.js","name":null,"original":{"line":16,"column":8},"generated":{"line":1,"column":198}},{"source":"../../../src/middlewares/parsing/blob.js","name":"resource","original":{"line":16,"column":12},"generated":{"line":1,"column":201}},{"source":"../../../src/middlewares/parsing/blob.js","name":"xhr","original":{"line":16,"column":21},"generated":{"line":1,"column":203}},{"source":"../../../src/middlewares/parsing/blob.js","name":"resource","original":{"line":16,"column":28},"generated":{"line":1,"column":208}},{"source":"../../../src/middlewares/parsing/blob.js","name":"xhrType","original":{"line":16,"column":37},"generated":{"line":1,"column":210}},{"source":"../../../src/middlewares/parsing/blob.js","name":"Resource","original":{"line":16,"column":49},"generated":{"line":1,"column":220}},{"source":"../../../src/middlewares/parsing/blob.js","name":"Resource","original":{"line":16,"column":49},"generated":{"line":1,"column":222}},{"source":"../../../src/middlewares/parsing/blob.js","name":"XHR_RESPONSE_TYPE","original":{"line":16,"column":58},"generated":{"line":1,"column":231}},{"source":"../../../src/middlewares/parsing/blob.js","name":"BLOB","original":{"line":16,"column":76},"generated":{"line":1,"column":249}},{"source":"../../../src/middlewares/parsing/blob.js","name":null,"original":{"line":18,"column":12},"generated":{"line":1,"column":254}},{"source":"../../../src/middlewares/parsing/blob.js","name":"window","original":{"line":18,"column":17},"generated":{"line":1,"column":257}},{"source":"../../../src/middlewares/parsing/blob.js","name":"Blob","original":{"line":18,"column":24},"generated":{"line":1,"column":264}},{"source":"../../../src/middlewares/parsing/blob.js","name":null,"original":{"line":18,"column":57},"generated":{"line":1,"column":270}},{"source":"../../../src/middlewares/parsing/blob.js","name":"resource","original":{"line":18,"column":39},"generated":{"line":1,"column":287}},{"source":"../../../src/middlewares/parsing/blob.js","name":"data","original":{"line":18,"column":48},"generated":{"line":1,"column":289}},{"source":"../../../src/middlewares/parsing/blob.js","name":null,"original":{"line":40,"column":17},"generated":{"line":1,"column":295}},{"source":"../../../src/middlewares/parsing/blob.js","name":null,"original":{"line":40,"column":61},"generated":{"line":1,"column":298}},{"source":"../../../src/middlewares/parsing/blob.js","name":"resource","original":{"line":40,"column":21},"generated":{"line":1,"column":302}},{"source":"../../../src/middlewares/parsing/blob.js","name":"data","original":{"line":40,"column":30},"generated":{"line":1,"column":304}},{"source":"../../../src/middlewares/parsing/blob.js","name":"type","original":{"line":40,"column":35},"generated":{"line":1,"column":309}},{"source":"../../../src/middlewares/parsing/blob.js","name":"indexOf","original":{"line":40,"column":40},"generated":{"line":1,"column":314}},{"source":"../../../src/middlewares/parsing/blob.js","name":null,"original":{"line":40,"column":48},"generated":{"line":1,"column":322}},{"source":"../../../src/middlewares/parsing/blob.js","name":null,"original":{"line":40,"column":64},"generated":{"line":1,"column":331}},{"source":"../../../src/middlewares/parsing/blob.js","name":null,"original":{"line":41,"column":16},"generated":{"line":1,"column":332}},{"source":"../../../src/middlewares/parsing/blob.js","name":"src","original":{"line":41,"column":22},"generated":{"line":1,"column":336}},{"source":"../../../src/middlewares/parsing/blob.js","name":"Url","original":{"line":41,"column":28},"generated":{"line":1,"column":338}},{"source":"../../../src/middlewares/parsing/blob.js","name":"createObjectURL","original":{"line":41,"column":32},"generated":{"line":1,"column":340}},{"source":"../../../src/middlewares/parsing/blob.js","name":"resource","original":{"line":41,"column":48},"generated":{"line":1,"column":356}},{"source":"../../../src/middlewares/parsing/blob.js","name":"data","original":{"line":41,"column":57},"generated":{"line":1,"column":358}},{"source":"../../../src/middlewares/parsing/blob.js","name":null,"original":{"line":59,"column":16},"generated":{"line":1,"column":364}},{"source":"../../../src/middlewares/parsing/blob.js","name":"resource","original":{"line":43,"column":16},"generated":{"line":1,"column":371}},{"source":"../../../src/middlewares/parsing/blob.js","name":"blob","original":{"line":43,"column":25},"generated":{"line":1,"column":373}},{"source":"../../../src/middlewares/parsing/blob.js","name":"resource","original":{"line":43,"column":32},"generated":{"line":1,"column":378}},{"source":"../../../src/middlewares/parsing/blob.js","name":"data","original":{"line":43,"column":41},"generated":{"line":1,"column":380}},{"source":"../../../src/middlewares/parsing/blob.js","name":"resource","original":{"line":44,"column":16},"generated":{"line":1,"column":385}},{"source":"../../../src/middlewares/parsing/blob.js","name":"data","original":{"line":44,"column":25},"generated":{"line":1,"column":387}},{"source":"../../../src/middlewares/parsing/blob.js","name":null,"original":{"line":44,"column":32},"generated":{"line":1,"column":392}},{"source":"../../../src/middlewares/parsing/blob.js","name":"Image","original":{"line":44,"column":36},"generated":{"line":1,"column":396}},{"source":"../../../src/middlewares/parsing/blob.js","name":"resource","original":{"line":45,"column":16},"generated":{"line":1,"column":402}},{"source":"../../../src/middlewares/parsing/blob.js","name":"data","original":{"line":45,"column":25},"generated":{"line":1,"column":404}},{"source":"../../../src/middlewares/parsing/blob.js","name":"src","original":{"line":45,"column":30},"generated":{"line":1,"column":409}},{"source":"../../../src/middlewares/parsing/blob.js","name":"src","original":{"line":45,"column":36},"generated":{"line":1,"column":413}},{"source":"../../../src/middlewares/parsing/blob.js","name":"resource","original":{"line":47,"column":16},"generated":{"line":1,"column":415}},{"source":"../../../src/middlewares/parsing/blob.js","name":"type","original":{"line":47,"column":25},"generated":{"line":1,"column":417}},{"source":"../../../src/middlewares/parsing/blob.js","name":"Resource","original":{"line":47,"column":32},"generated":{"line":1,"column":422}},{"source":"../../../src/middlewares/parsing/blob.js","name":"Resource","original":{"line":47,"column":32},"generated":{"line":1,"column":424}},{"source":"../../../src/middlewares/parsing/blob.js","name":"TYPE","original":{"line":47,"column":41},"generated":{"line":1,"column":433}},{"source":"../../../src/middlewares/parsing/blob.js","name":"IMAGE","original":{"line":47,"column":46},"generated":{"line":1,"column":438}},{"source":"../../../src/middlewares/parsing/blob.js","name":"resource","original":{"line":51,"column":16},"generated":{"line":1,"column":449}},{"source":"../../../src/middlewares/parsing/blob.js","name":"data","original":{"line":51,"column":25},"generated":{"line":1,"column":451}},{"source":"../../../src/middlewares/parsing/blob.js","name":"onload","original":{"line":51,"column":30},"generated":{"line":1,"column":456}},{"source":"../../../src/middlewares/parsing/blob.js","name":null,"original":{"line":51,"column":39},"generated":{"line":1,"column":463}},{"source":"../../../src/middlewares/parsing/blob.js","name":"Url","original":{"line":52,"column":20},"generated":{"line":1,"column":474}},{"source":"../../../src/middlewares/parsing/blob.js","name":"revokeObjectURL","original":{"line":52,"column":24},"generated":{"line":1,"column":476}},{"source":"../../../src/middlewares/parsing/blob.js","name":"src","original":{"line":52,"column":40},"generated":{"line":1,"column":492}},{"source":"../../../src/middlewares/parsing/blob.js","name":"resource","original":{"line":53,"column":20},"generated":{"line":1,"column":495}},{"source":"../../../src/middlewares/parsing/blob.js","name":"data","original":{"line":53,"column":29},"generated":{"line":1,"column":497}},{"source":"../../../src/middlewares/parsing/blob.js","name":"onload","original":{"line":53,"column":34},"generated":{"line":1,"column":502}},{"source":"../../../src/middlewares/parsing/blob.js","name":null,"original":{"line":53,"column":43},"generated":{"line":1,"column":509}},{"source":"../../../src/middlewares/parsing/blob.js","name":"next","original":{"line":55,"column":20},"generated":{"line":1,"column":514}},{"source":"../../../src/middlewares/parsing/blob.js","name":null,"original":{"line":18,"column":67},"generated":{"line":1,"column":525}},{"source":"../../../src/middlewares/parsing/blob.js","name":null,"original":{"line":19,"column":16},"generated":{"line":1,"column":526}},{"source":"../../../src/middlewares/parsing/blob.js","name":"type","original":{"line":19,"column":22},"generated":{"line":1,"column":530}},{"source":"../../../src/middlewares/parsing/blob.js","name":"resource","original":{"line":19,"column":29},"generated":{"line":1,"column":532}},{"source":"../../../src/middlewares/parsing/blob.js","name":"xhr","original":{"line":19,"column":38},"generated":{"line":1,"column":534}},{"source":"../../../src/middlewares/parsing/blob.js","name":"getResponseHeader","original":{"line":19,"column":42},"generated":{"line":1,"column":538}},{"source":"../../../src/middlewares/parsing/blob.js","name":null,"original":{"line":19,"column":60},"generated":{"line":1,"column":556}},{"source":"../../../src/middlewares/parsing/blob.js","name":null,"original":{"line":22,"column":16},"generated":{"line":1,"column":572}},{"source":"../../../src/middlewares/parsing/blob.js","name":"type","original":{"line":22,"column":20},"generated":{"line":1,"column":575}},{"source":"../../../src/middlewares/parsing/blob.js","name":null,"original":{"line":22,"column":54},"generated":{"line":1,"column":578}},{"source":"../../../src/middlewares/parsing/blob.js","name":"type","original":{"line":22,"column":28},"generated":{"line":1,"column":582}},{"source":"../../../src/middlewares/parsing/blob.js","name":"indexOf","original":{"line":22,"column":33},"generated":{"line":1,"column":584}},{"source":"../../../src/middlewares/parsing/blob.js","name":null,"original":{"line":22,"column":41},"generated":{"line":1,"column":592}},{"source":"../../../src/middlewares/parsing/blob.js","name":null,"original":{"line":36,"column":20},"generated":{"line":1,"column":601}},{"source":"../../../src/middlewares/parsing/blob.js","name":"resource","original":{"line":23,"column":20},"generated":{"line":1,"column":608}},{"source":"../../../src/middlewares/parsing/blob.js","name":"data","original":{"line":23,"column":29},"generated":{"line":1,"column":610}},{"source":"../../../src/middlewares/parsing/blob.js","name":null,"original":{"line":23,"column":36},"generated":{"line":1,"column":615}},{"source":"../../../src/middlewares/parsing/blob.js","name":"Image","original":{"line":23,"column":40},"generated":{"line":1,"column":619}},{"source":"../../../src/middlewares/parsing/blob.js","name":"resource","original":{"line":24,"column":20},"generated":{"line":1,"column":625}},{"source":"../../../src/middlewares/parsing/blob.js","name":"data","original":{"line":24,"column":29},"generated":{"line":1,"column":627}},{"source":"../../../src/middlewares/parsing/blob.js","name":"src","original":{"line":24,"column":34},"generated":{"line":1,"column":632}},{"source":"../../../src/middlewares/parsing/blob.js","name":null,"original":{"line":24,"column":20},"generated":{"line":1,"column":636}},{"source":"../../../src/middlewares/parsing/blob.js","name":"type","original":{"line":24,"column":48},"generated":{"line":1,"column":644}},{"source":"../../../src/middlewares/parsing/blob.js","name":null,"original":{"line":24,"column":20},"generated":{"line":1,"column":646}},{"source":"../../../src/middlewares/parsing/blob.js","name":null,"original":{"line":24,"column":63},"generated":{"line":1,"column":658}},{"source":"../../../src/middlewares/parsing/blob.js","name":null,"original":{"line":24,"column":63},"generated":{"line":1,"column":660}},{"source":"../../../src/middlewares/parsing/blob.js","name":null,"original":{"line":24,"column":63},"generated":{"line":1,"column":662}},{"source":"../../../src/middlewares/parsing/blob.js","name":"resource","original":{"line":24,"column":76},"generated":{"line":1,"column":676}},{"source":"../../../src/middlewares/parsing/blob.js","name":"xhr","original":{"line":24,"column":85},"generated":{"line":1,"column":678}},{"source":"../../../src/middlewares/parsing/blob.js","name":"responseText","original":{"line":24,"column":89},"generated":{"line":1,"column":682}},{"source":"../../../src/middlewares/parsing/blob.js","name":"resource","original":{"line":26,"column":20},"generated":{"line":1,"column":696}},{"source":"../../../src/middlewares/parsing/blob.js","name":"type","original":{"line":26,"column":29},"generated":{"line":1,"column":698}},{"source":"../../../src/middlewares/parsing/blob.js","name":"Resource","original":{"line":26,"column":36},"generated":{"line":1,"column":703}},{"source":"../../../src/middlewares/parsing/blob.js","name":"Resource","original":{"line":26,"column":36},"generated":{"line":1,"column":705}},{"source":"../../../src/middlewares/parsing/blob.js","name":"TYPE","original":{"line":26,"column":45},"generated":{"line":1,"column":714}},{"source":"../../../src/middlewares/parsing/blob.js","name":"IMAGE","original":{"line":26,"column":50},"generated":{"line":1,"column":719}},{"source":"../../../src/middlewares/parsing/blob.js","name":"resource","original":{"line":29,"column":20},"generated":{"line":1,"column":730}},{"source":"../../../src/middlewares/parsing/blob.js","name":"data","original":{"line":29,"column":29},"generated":{"line":1,"column":732}},{"source":"../../../src/middlewares/parsing/blob.js","name":"onload","original":{"line":29,"column":34},"generated":{"line":1,"column":737}},{"source":"../../../src/middlewares/parsing/blob.js","name":null,"original":{"line":29,"column":43},"generated":{"line":1,"column":744}},{"source":"../../../src/middlewares/parsing/blob.js","name":"resource","original":{"line":30,"column":24},"generated":{"line":1,"column":755}},{"source":"../../../src/middlewares/parsing/blob.js","name":"data","original":{"line":30,"column":33},"generated":{"line":1,"column":757}},{"source":"../../../src/middlewares/parsing/blob.js","name":"onload","original":{"line":30,"column":38},"generated":{"line":1,"column":762}},{"source":"../../../src/middlewares/parsing/blob.js","name":null,"original":{"line":30,"column":47},"generated":{"line":1,"column":769}},{"source":"../../../src/middlewares/parsing/blob.js","name":"next","original":{"line":32,"column":24},"generated":{"line":1,"column":774}},{"source":"../../../src/middlewares/parsing/blob.js","name":"next","original":{"line":63,"column":8},"generated":{"line":1,"column":780}},{"source":"../../../src/middlewares/parsing/blob.js","name":"next","original":{"line":10,"column":12},"generated":{"line":1,"column":789}}],"sources":{"../../../src/middlewares/parsing/blob.js":"import { Resource } from '../../Resource';\nimport { encodeBinary } from '../../b64';\n\nconst Url = window.URL || window.webkitURL;\n\n// a middleware for transforming XHR loaded Blobs into more useful objects\nexport function blobMiddlewareFactory() {\n    return function blobMiddleware(resource, next) {\n        if (!resource.data) {\n            next();\n\n            return;\n        }\n\n        // if this was an XHR load of a blob\n        if (resource.xhr && resource.xhrType === Resource.XHR_RESPONSE_TYPE.BLOB) {\n            // if there is no blob support we probably got a binary string back\n            if (!window.Blob || typeof resource.data === 'string') {\n                const type = resource.xhr.getResponseHeader('content-type');\n\n                // this is an image, convert the binary string into a data url\n                if (type && type.indexOf('image') === 0) {\n                    resource.data = new Image();\n                    resource.data.src = `data:${type};base64,${encodeBinary(resource.xhr.responseText)}`;\n\n                    resource.type = Resource.TYPE.IMAGE;\n\n                    // wait until the image loads and then callback\n                    resource.data.onload = () => {\n                        resource.data.onload = null;\n\n                        next();\n                    };\n\n                    // next will be called on load\n                    return;\n                }\n            }\n            // if content type says this is an image, then we should transform the blob into an Image object\n            else if (resource.data.type.indexOf('image') === 0) {\n                const src = Url.createObjectURL(resource.data);\n\n                resource.blob = resource.data;\n                resource.data = new Image();\n                resource.data.src = src;\n\n                resource.type = Resource.TYPE.IMAGE;\n\n                // cleanup the no longer used blob after the image loads\n                // TODO: Is this correct? Will the image be invalid after revoking?\n                resource.data.onload = () => {\n                    Url.revokeObjectURL(src);\n                    resource.data.onload = null;\n\n                    next();\n                };\n\n                // next will be called on load.\n                return;\n            }\n        }\n\n        next();\n    };\n}\n"},"lineCount":null}},"error":null,"hash":"c8ee922aea8b47be4375ec2e74ee4fce","cacheData":{"env":{}}}