{"id":"cI2P","dependencies":[{"name":"C:\\Github\\Symphonic-AI\\package.json","includedInParent":true,"mtime":1724703272135},{"name":"./helpers","loc":{"line":1,"column":77,"index":77},"parent":"C:\\Github\\Symphonic-AI\\src\\scripts\\smoothing.js","resolved":"C:\\Github\\Symphonic-AI\\src\\scripts\\helpers.js"},{"name":"../config","loc":{"line":2,"column":19,"index":109},"parent":"C:\\Github\\Symphonic-AI\\src\\scripts\\smoothing.js","resolved":"C:\\Github\\Symphonic-AI\\src\\config.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.smooth=r,exports.smoothNum=y;var t=require(\"./helpers\"),o=e(require(\"../config\"));function e(t){return t&&t.__esModule?t:{default:t}}var i,n,s=o.default.smoothing.smoothing;function r(e,n){if(o.default.smoothing.jumpDetection&&(e=c(e,n)),!i)return i=e,e;var r=(0,t.getKeypoints)(e),p=(0,t.getKeypoints)(i),u=r;Object.keys(r).forEach(function(t){var o=p[t].position,e=u[t].position,i=r[t].position;e.x=(o.x-i.x)*s+i.x,e.y=(o.y-i.y)*s+i.y});var a=(0,t.getPoseFromKeypoints)(u);return a.score=e.score,i=a,a}var p,u,a=[];function c(e,i){if(!n)return n=e,e;var s=o.default.smoothing.maxJumpRatio*i,r=[];e.keypoints.forEach(function(o){var e=(0,t.getKeypoint)(n,o.part);(0,t.getDistance)(o.position,e.position)>s?r.push(e):r.push(o)});var p=Object.assign({},e);return e.keypoints=r,a.forEach(function(o){(0,t.getKeypoint)(n,o);e.keypoints.forEach(function(e){e.part===o&&(e.position.x=(0,t.getKeypoint)(p,o).position.x,e.position.y=(0,t.getKeypoint)(p,o).position.y)}),a.splice(a.indexOf(o),1)}),n=e,e}function f(){setInterval(function(){var o=p,e=n;void 0!==o&&o.keypoints&&void 0!==e&&e.keypoints&&e.keypoints.forEach(function(e){var i=(0,t.getKeypoint)(o,e.part);0===(0,t.getDistance)(e.position,i.position)&&a.push(e.part)}),p=Object.assign({},n)},o.default.smoothing.jumpResetTime)}function y(t,o){if(!u)return u=t,t;var e=(u-t)*o+t;return u=e,e===t&&console.log(\"DOINAOIN\"),e}o.default.smoothing.jumpDetection&&f();"},"sourceMaps":{"js":{"mappings":[{"source":"scripts/smoothing.js","original":{"line":109,"column":0},"generated":{"line":1,"column":0}},{"source":"scripts/smoothing.js","original":{"line":109,"column":0},"generated":{"line":1,"column":13}},{"source":"scripts/smoothing.js","original":{"line":109,"column":0},"generated":{"line":1,"column":20}},{"source":"scripts/smoothing.js","original":{"line":109,"column":0},"generated":{"line":1,"column":35}},{"source":"scripts/smoothing.js","original":{"line":109,"column":0},"generated":{"line":1,"column":43}},{"source":"scripts/smoothing.js","original":{"line":109,"column":0},"generated":{"line":1,"column":56}},{"source":"scripts/smoothing.js","original":{"line":109,"column":0},"generated":{"line":1,"column":57}},{"source":"scripts/smoothing.js","original":{"line":109,"column":0},"generated":{"line":1,"column":64}},{"source":"scripts/smoothing.js","original":{"line":109,"column":0},"generated":{"line":1,"column":68}},{"source":"scripts/smoothing.js","original":{"line":109,"column":0},"generated":{"line":1,"column":76}},{"source":"scripts/smoothing.js","original":{"line":109,"column":0},"generated":{"line":1,"column":83}},{"source":"scripts/smoothing.js","original":{"line":109,"column":0},"generated":{"line":1,"column":85}},{"source":"scripts/smoothing.js","original":{"line":109,"column":0},"generated":{"line":1,"column":93}},{"source":"scripts/smoothing.js","original":{"line":109,"column":0},"generated":{"line":1,"column":103}},{"source":"scripts/smoothing.js","original":{"line":1,"column":0},"generated":{"line":1,"column":105}},{"source":"scripts/smoothing.js","original":{"line":1,"column":0},"generated":{"line":1,"column":109}},{"source":"scripts/smoothing.js","original":{"line":1,"column":0},"generated":{"line":1,"column":111}},{"source":"scripts/smoothing.js","original":{"line":1,"column":0},"generated":{"line":1,"column":119}},{"source":"scripts/smoothing.js","original":{"line":2,"column":0},"generated":{"line":1,"column":132}},{"source":"scripts/smoothing.js","original":{"line":2,"column":0},"generated":{"line":1,"column":134}},{"source":"scripts/smoothing.js","original":{"line":2,"column":0},"generated":{"line":1,"column":136}},{"source":"scripts/smoothing.js","original":{"line":2,"column":0},"generated":{"line":1,"column":144}},{"source":"scripts/smoothing.js","original":{"line":2,"column":31},"generated":{"line":1,"column":158}},{"source":"scripts/smoothing.js","original":{"line":2,"column":31},"generated":{"line":1,"column":167}},{"source":"scripts/smoothing.js","original":{"line":2,"column":31},"generated":{"line":1,"column":169}},{"source":"scripts/smoothing.js","original":{"line":2,"column":31},"generated":{"line":1,"column":172}},{"source":"scripts/smoothing.js","original":{"line":2,"column":31},"generated":{"line":1,"column":179}},{"source":"scripts/smoothing.js","original":{"line":2,"column":31},"generated":{"line":1,"column":182}},{"source":"scripts/smoothing.js","original":{"line":2,"column":31},"generated":{"line":1,"column":184}},{"source":"scripts/smoothing.js","original":{"line":2,"column":31},"generated":{"line":1,"column":195}},{"source":"scripts/smoothing.js","original":{"line":2,"column":31},"generated":{"line":1,"column":197}},{"source":"scripts/smoothing.js","original":{"line":2,"column":31},"generated":{"line":1,"column":198}},{"source":"scripts/smoothing.js","original":{"line":2,"column":31},"generated":{"line":1,"column":206}},{"source":"scripts/smoothing.js","original":{"line":4,"column":0},"generated":{"line":1,"column":209}},{"source":"scripts/smoothing.js","name":"smoothPrevPose","original":{"line":5,"column":4},"generated":{"line":1,"column":213}},{"source":"scripts/smoothing.js","name":"jumpPrevPose","original":{"line":33,"column":4},"generated":{"line":1,"column":215}},{"source":"scripts/smoothing.js","name":"smoothing","original":{"line":4,"column":6},"generated":{"line":1,"column":217}},{"source":"scripts/smoothing.js","name":"config","original":{"line":4,"column":18},"generated":{"line":1,"column":219}},{"source":"scripts/smoothing.js","original":{"line":4,"column":24},"generated":{"line":1,"column":221}},{"source":"scripts/smoothing.js","name":"smoothing","original":{"line":4,"column":25},"generated":{"line":1,"column":229}},{"source":"scripts/smoothing.js","name":"smoothing","original":{"line":4,"column":35},"generated":{"line":1,"column":239}},{"source":"scripts/smoothing.js","original":{"line":8,"column":7},"generated":{"line":1,"column":249}},{"source":"scripts/smoothing.js","name":"smooth","original":{"line":8,"column":16},"generated":{"line":1,"column":258}},{"source":"scripts/smoothing.js","name":"pose","original":{"line":8,"column":23},"generated":{"line":1,"column":260}},{"source":"scripts/smoothing.js","name":"armspan","original":{"line":8,"column":29},"generated":{"line":1,"column":262}},{"source":"scripts/smoothing.js","original":{"line":10,"column":2},"generated":{"line":1,"column":265}},{"source":"scripts/smoothing.js","name":"config","original":{"line":9,"column":6},"generated":{"line":1,"column":268}},{"source":"scripts/smoothing.js","original":{"line":9,"column":12},"generated":{"line":1,"column":270}},{"source":"scripts/smoothing.js","name":"smoothing","original":{"line":9,"column":13},"generated":{"line":1,"column":278}},{"source":"scripts/smoothing.js","name":"jumpDetection","original":{"line":9,"column":23},"generated":{"line":1,"column":288}},{"source":"scripts/smoothing.js","name":"pose","original":{"line":9,"column":38},"generated":{"line":1,"column":304}},{"source":"scripts/smoothing.js","name":"unjump","original":{"line":9,"column":45},"generated":{"line":1,"column":306}},{"source":"scripts/smoothing.js","name":"pose","original":{"line":9,"column":52},"generated":{"line":1,"column":308}},{"source":"scripts/smoothing.js","name":"armspan","original":{"line":9,"column":58},"generated":{"line":1,"column":310}},{"source":"scripts/smoothing.js","name":"smoothPrevPose","original":{"line":10,"column":7},"generated":{"line":1,"column":315}},{"source":"scripts/smoothing.js","original":{"line":10,"column":48},"generated":{"line":1,"column":317}},{"source":"scripts/smoothing.js","name":"smoothPrevPose","original":{"line":10,"column":25},"generated":{"line":1,"column":324}},{"source":"scripts/smoothing.js","name":"pose","original":{"line":10,"column":42},"generated":{"line":1,"column":326}},{"source":"scripts/smoothing.js","name":"pose","original":{"line":10,"column":55},"generated":{"line":1,"column":328}},{"source":"scripts/smoothing.js","original":{"line":12,"column":2},"generated":{"line":1,"column":330}},{"source":"scripts/smoothing.js","name":"keypoints","original":{"line":12,"column":8},"generated":{"line":1,"column":334}},{"source":"scripts/smoothing.js","original":{"line":12,"column":20},"generated":{"line":1,"column":337}},{"source":"scripts/smoothing.js","name":"getKeypoints","original":{"line":12,"column":20},"generated":{"line":1,"column":339}},{"source":"scripts/smoothing.js","original":{"line":12,"column":32},"generated":{"line":1,"column":341}},{"source":"scripts/smoothing.js","name":"pose","original":{"line":12,"column":33},"generated":{"line":1,"column":355}},{"source":"scripts/smoothing.js","name":"prevKeypoints","original":{"line":13,"column":8},"generated":{"line":1,"column":358}},{"source":"scripts/smoothing.js","original":{"line":13,"column":24},"generated":{"line":1,"column":361}},{"source":"scripts/smoothing.js","name":"getKeypoints","original":{"line":13,"column":24},"generated":{"line":1,"column":363}},{"source":"scripts/smoothing.js","original":{"line":13,"column":36},"generated":{"line":1,"column":365}},{"source":"scripts/smoothing.js","name":"smoothPrevPose","original":{"line":13,"column":37},"generated":{"line":1,"column":379}},{"source":"scripts/smoothing.js","name":"smoothKeypoints","original":{"line":14,"column":8},"generated":{"line":1,"column":382}},{"source":"scripts/smoothing.js","name":"keypoints","original":{"line":14,"column":26},"generated":{"line":1,"column":384}},{"source":"scripts/smoothing.js","name":"Object","original":{"line":16,"column":2},"generated":{"line":1,"column":386}},{"source":"scripts/smoothing.js","name":"keys","original":{"line":16,"column":9},"generated":{"line":1,"column":393}},{"source":"scripts/smoothing.js","name":"keypoints","original":{"line":16,"column":14},"generated":{"line":1,"column":398}},{"source":"scripts/smoothing.js","name":"forEach","original":{"line":16,"column":25},"generated":{"line":1,"column":401}},{"source":"scripts/smoothing.js","original":{"line":16,"column":33},"generated":{"line":1,"column":409}},{"source":"scripts/smoothing.js","name":"part","original":{"line":16,"column":34},"generated":{"line":1,"column":418}},{"source":"scripts/smoothing.js","original":{"line":17,"column":4},"generated":{"line":1,"column":421}},{"source":"scripts/smoothing.js","name":"prevPos","original":{"line":17,"column":10},"generated":{"line":1,"column":425}},{"source":"scripts/smoothing.js","name":"prevKeypoints","original":{"line":17,"column":20},"generated":{"line":1,"column":427}},{"source":"scripts/smoothing.js","name":"part","original":{"line":17,"column":34},"generated":{"line":1,"column":429}},{"source":"scripts/smoothing.js","name":"position","original":{"line":17,"column":40},"generated":{"line":1,"column":432}},{"source":"scripts/smoothing.js","name":"smoothPos","original":{"line":18,"column":10},"generated":{"line":1,"column":441}},{"source":"scripts/smoothing.js","name":"smoothKeypoints","original":{"line":18,"column":22},"generated":{"line":1,"column":443}},{"source":"scripts/smoothing.js","name":"part","original":{"line":18,"column":38},"generated":{"line":1,"column":445}},{"source":"scripts/smoothing.js","name":"position","original":{"line":18,"column":44},"generated":{"line":1,"column":448}},{"source":"scripts/smoothing.js","name":"pos","original":{"line":19,"column":10},"generated":{"line":1,"column":457}},{"source":"scripts/smoothing.js","name":"keypoints","original":{"line":19,"column":16},"generated":{"line":1,"column":459}},{"source":"scripts/smoothing.js","name":"part","original":{"line":19,"column":26},"generated":{"line":1,"column":461}},{"source":"scripts/smoothing.js","name":"position","original":{"line":19,"column":32},"generated":{"line":1,"column":464}},{"source":"scripts/smoothing.js","name":"smoothPos","original":{"line":21,"column":4},"generated":{"line":1,"column":473}},{"source":"scripts/smoothing.js","name":"x","original":{"line":21,"column":14},"generated":{"line":1,"column":475}},{"source":"scripts/smoothing.js","name":"prevPos","original":{"line":21,"column":19},"generated":{"line":1,"column":478}},{"source":"scripts/smoothing.js","name":"x","original":{"line":21,"column":27},"generated":{"line":1,"column":480}},{"source":"scripts/smoothing.js","name":"pos","original":{"line":21,"column":31},"generated":{"line":1,"column":482}},{"source":"scripts/smoothing.js","name":"x","original":{"line":21,"column":35},"generated":{"line":1,"column":484}},{"source":"scripts/smoothing.js","name":"smoothing","original":{"line":21,"column":41},"generated":{"line":1,"column":487}},{"source":"scripts/smoothing.js","name":"pos","original":{"line":21,"column":54},"generated":{"line":1,"column":489}},{"source":"scripts/smoothing.js","name":"x","original":{"line":21,"column":58},"generated":{"line":1,"column":491}},{"source":"scripts/smoothing.js","name":"smoothPos","original":{"line":22,"column":4},"generated":{"line":1,"column":493}},{"source":"scripts/smoothing.js","name":"y","original":{"line":22,"column":14},"generated":{"line":1,"column":495}},{"source":"scripts/smoothing.js","name":"prevPos","original":{"line":22,"column":19},"generated":{"line":1,"column":498}},{"source":"scripts/smoothing.js","name":"y","original":{"line":22,"column":27},"generated":{"line":1,"column":500}},{"source":"scripts/smoothing.js","name":"pos","original":{"line":22,"column":31},"generated":{"line":1,"column":502}},{"source":"scripts/smoothing.js","name":"y","original":{"line":22,"column":35},"generated":{"line":1,"column":504}},{"source":"scripts/smoothing.js","name":"smoothing","original":{"line":22,"column":41},"generated":{"line":1,"column":507}},{"source":"scripts/smoothing.js","name":"pos","original":{"line":22,"column":54},"generated":{"line":1,"column":509}},{"source":"scripts/smoothing.js","name":"y","original":{"line":22,"column":58},"generated":{"line":1,"column":511}},{"source":"scripts/smoothing.js","original":{"line":25,"column":2},"generated":{"line":1,"column":515}},{"source":"scripts/smoothing.js","name":"smoothPose","original":{"line":25,"column":8},"generated":{"line":1,"column":519}},{"source":"scripts/smoothing.js","original":{"line":25,"column":21},"generated":{"line":1,"column":522}},{"source":"scripts/smoothing.js","name":"getPoseFromKeypoints","original":{"line":25,"column":21},"generated":{"line":1,"column":524}},{"source":"scripts/smoothing.js","original":{"line":25,"column":41},"generated":{"line":1,"column":526}},{"source":"scripts/smoothing.js","name":"smoothKeypoints","original":{"line":25,"column":42},"generated":{"line":1,"column":548}},{"source":"scripts/smoothing.js","original":{"line":28,"column":2},"generated":{"line":1,"column":551}},{"source":"scripts/smoothing.js","name":"smoothPose","original":{"line":26,"column":2},"generated":{"line":1,"column":558}},{"source":"scripts/smoothing.js","name":"score","original":{"line":26,"column":13},"generated":{"line":1,"column":560}},{"source":"scripts/smoothing.js","name":"pose","original":{"line":26,"column":21},"generated":{"line":1,"column":566}},{"source":"scripts/smoothing.js","name":"score","original":{"line":26,"column":26},"generated":{"line":1,"column":568}},{"source":"scripts/smoothing.js","name":"smoothPrevPose","original":{"line":27,"column":2},"generated":{"line":1,"column":574}},{"source":"scripts/smoothing.js","name":"smoothPose","original":{"line":27,"column":19},"generated":{"line":1,"column":576}},{"source":"scripts/smoothing.js","name":"smoothPose","original":{"line":28,"column":9},"generated":{"line":1,"column":578}},{"source":"scripts/smoothing.js","original":{"line":34,"column":0},"generated":{"line":1,"column":580}},{"source":"scripts/smoothing.js","name":"jumpResetPose","original":{"line":35,"column":4},"generated":{"line":1,"column":584}},{"source":"scripts/smoothing.js","name":"prevNum","original":{"line":102,"column":4},"generated":{"line":1,"column":586}},{"source":"scripts/smoothing.js","name":"jumpReset","original":{"line":34,"column":4},"generated":{"line":1,"column":588}},{"source":"scripts/smoothing.js","original":{"line":34,"column":16},"generated":{"line":1,"column":590}},{"source":"scripts/smoothing.js","original":{"line":36,"column":0},"generated":{"line":1,"column":593}},{"source":"scripts/smoothing.js","name":"unjump","original":{"line":36,"column":9},"generated":{"line":1,"column":602}},{"source":"scripts/smoothing.js","name":"pose","original":{"line":36,"column":16},"generated":{"line":1,"column":604}},{"source":"scripts/smoothing.js","name":"armspan","original":{"line":36,"column":22},"generated":{"line":1,"column":606}},{"source":"scripts/smoothing.js","original":{"line":37,"column":2},"generated":{"line":1,"column":609}},{"source":"scripts/smoothing.js","name":"jumpPrevPose","original":{"line":37,"column":7},"generated":{"line":1,"column":613}},{"source":"scripts/smoothing.js","original":{"line":39,"column":4},"generated":{"line":1,"column":615}},{"source":"scripts/smoothing.js","name":"jumpPrevPose","original":{"line":38,"column":4},"generated":{"line":1,"column":622}},{"source":"scripts/smoothing.js","name":"pose","original":{"line":38,"column":19},"generated":{"line":1,"column":624}},{"source":"scripts/smoothing.js","name":"pose","original":{"line":39,"column":11},"generated":{"line":1,"column":626}},{"source":"scripts/smoothing.js","original":{"line":43,"column":2},"generated":{"line":1,"column":628}},{"source":"scripts/smoothing.js","name":"maxDistance","original":{"line":43,"column":8},"generated":{"line":1,"column":632}},{"source":"scripts/smoothing.js","name":"config","original":{"line":43,"column":22},"generated":{"line":1,"column":634}},{"source":"scripts/smoothing.js","original":{"line":43,"column":28},"generated":{"line":1,"column":636}},{"source":"scripts/smoothing.js","name":"smoothing","original":{"line":43,"column":29},"generated":{"line":1,"column":644}},{"source":"scripts/smoothing.js","name":"maxJumpRatio","original":{"line":43,"column":39},"generated":{"line":1,"column":654}},{"source":"scripts/smoothing.js","name":"armspan","original":{"line":43,"column":54},"generated":{"line":1,"column":667}},{"source":"scripts/smoothing.js","name":"smoothedKeypoints","original":{"line":44,"column":8},"generated":{"line":1,"column":669}},{"source":"scripts/smoothing.js","original":{"line":44,"column":28},"generated":{"line":1,"column":671}},{"source":"scripts/smoothing.js","name":"pose","original":{"line":48,"column":2},"generated":{"line":1,"column":674}},{"source":"scripts/smoothing.js","name":"keypoints","original":{"line":48,"column":7},"generated":{"line":1,"column":676}},{"source":"scripts/smoothing.js","name":"forEach","original":{"line":48,"column":17},"generated":{"line":1,"column":686}},{"source":"scripts/smoothing.js","original":{"line":48,"column":25},"generated":{"line":1,"column":694}},{"source":"scripts/smoothing.js","name":"keypoint","original":{"line":48,"column":26},"generated":{"line":1,"column":703}},{"source":"scripts/smoothing.js","original":{"line":49,"column":4},"generated":{"line":1,"column":706}},{"source":"scripts/smoothing.js","name":"prevKeypoint","original":{"line":49,"column":10},"generated":{"line":1,"column":710}},{"source":"scripts/smoothing.js","original":{"line":49,"column":25},"generated":{"line":1,"column":713}},{"source":"scripts/smoothing.js","name":"getKeypoint","original":{"line":49,"column":25},"generated":{"line":1,"column":715}},{"source":"scripts/smoothing.js","original":{"line":49,"column":36},"generated":{"line":1,"column":717}},{"source":"scripts/smoothing.js","name":"jumpPrevPose","original":{"line":49,"column":37},"generated":{"line":1,"column":730}},{"source":"scripts/smoothing.js","name":"keypoint","original":{"line":49,"column":51},"generated":{"line":1,"column":732}},{"source":"scripts/smoothing.js","name":"part","original":{"line":49,"column":60},"generated":{"line":1,"column":734}},{"source":"scripts/smoothing.js","original":{"line":50,"column":21},"generated":{"line":1,"column":741}},{"source":"scripts/smoothing.js","name":"getDistance","original":{"line":50,"column":21},"generated":{"line":1,"column":743}},{"source":"scripts/smoothing.js","original":{"line":50,"column":32},"generated":{"line":1,"column":745}},{"source":"scripts/smoothing.js","name":"keypoint","original":{"line":50,"column":33},"generated":{"line":1,"column":758}},{"source":"scripts/smoothing.js","name":"position","original":{"line":50,"column":42},"generated":{"line":1,"column":760}},{"source":"scripts/smoothing.js","name":"prevKeypoint","original":{"line":50,"column":52},"generated":{"line":1,"column":769}},{"source":"scripts/smoothing.js","name":"position","original":{"line":50,"column":65},"generated":{"line":1,"column":771}},{"source":"scripts/smoothing.js","name":"maxDistance","original":{"line":52,"column":19},"generated":{"line":1,"column":781}},{"source":"scripts/smoothing.js","name":"smoothedKeypoints","original":{"line":53,"column":6},"generated":{"line":1,"column":783}},{"source":"scripts/smoothing.js","name":"push","original":{"line":53,"column":24},"generated":{"line":1,"column":785}},{"source":"scripts/smoothing.js","name":"prevKeypoint","original":{"line":53,"column":29},"generated":{"line":1,"column":790}},{"source":"scripts/smoothing.js","name":"smoothedKeypoints","original":{"line":55,"column":6},"generated":{"line":1,"column":793}},{"source":"scripts/smoothing.js","name":"push","original":{"line":55,"column":24},"generated":{"line":1,"column":795}},{"source":"scripts/smoothing.js","name":"keypoint","original":{"line":55,"column":29},"generated":{"line":1,"column":800}},{"source":"scripts/smoothing.js","original":{"line":59,"column":2},"generated":{"line":1,"column":805}},{"source":"scripts/smoothing.js","name":"originalPose","original":{"line":59,"column":8},"generated":{"line":1,"column":809}},{"source":"scripts/smoothing.js","name":"Object","original":{"line":59,"column":23},"generated":{"line":1,"column":811}},{"source":"scripts/smoothing.js","name":"assign","original":{"line":59,"column":30},"generated":{"line":1,"column":818}},{"source":"scripts/smoothing.js","original":{"line":59,"column":37},"generated":{"line":1,"column":825}},{"source":"scripts/smoothing.js","name":"pose","original":{"line":59,"column":41},"generated":{"line":1,"column":828}},{"source":"scripts/smoothing.js","original":{"line":75,"column":2},"generated":{"line":1,"column":831}},{"source":"scripts/smoothing.js","name":"pose","original":{"line":60,"column":2},"generated":{"line":1,"column":838}},{"source":"scripts/smoothing.js","name":"keypoints","original":{"line":60,"column":7},"generated":{"line":1,"column":840}},{"source":"scripts/smoothing.js","name":"smoothedKeypoints","original":{"line":60,"column":19},"generated":{"line":1,"column":850}},{"source":"scripts/smoothing.js","name":"jumpReset","original":{"line":63,"column":2},"generated":{"line":1,"column":852}},{"source":"scripts/smoothing.js","name":"forEach","original":{"line":63,"column":12},"generated":{"line":1,"column":854}},{"source":"scripts/smoothing.js","original":{"line":63,"column":20},"generated":{"line":1,"column":862}},{"source":"scripts/smoothing.js","name":"part","original":{"line":63,"column":21},"generated":{"line":1,"column":871}},{"source":"scripts/smoothing.js","original":{"line":64,"column":25},"generated":{"line":1,"column":875}},{"source":"scripts/smoothing.js","name":"getKeypoint","original":{"line":64,"column":25},"generated":{"line":1,"column":877}},{"source":"scripts/smoothing.js","original":{"line":64,"column":36},"generated":{"line":1,"column":879}},{"source":"scripts/smoothing.js","name":"jumpPrevPose","original":{"line":64,"column":37},"generated":{"line":1,"column":892}},{"source":"scripts/smoothing.js","name":"part","original":{"line":64,"column":51},"generated":{"line":1,"column":894}},{"source":"scripts/smoothing.js","name":"pose","original":{"line":65,"column":4},"generated":{"line":1,"column":897}},{"source":"scripts/smoothing.js","name":"keypoints","original":{"line":65,"column":9},"generated":{"line":1,"column":899}},{"source":"scripts/smoothing.js","name":"forEach","original":{"line":65,"column":19},"generated":{"line":1,"column":909}},{"source":"scripts/smoothing.js","original":{"line":65,"column":27},"generated":{"line":1,"column":917}},{"source":"scripts/smoothing.js","name":"keypoint","original":{"line":65,"column":28},"generated":{"line":1,"column":926}},{"source":"scripts/smoothing.js","name":"keypoint","original":{"line":66,"column":10},"generated":{"line":1,"column":929}},{"source":"scripts/smoothing.js","name":"part","original":{"line":66,"column":19},"generated":{"line":1,"column":931}},{"source":"scripts/smoothing.js","name":"part","original":{"line":66,"column":28},"generated":{"line":1,"column":938}},{"source":"scripts/smoothing.js","name":"keypoint","original":{"line":67,"column":8},"generated":{"line":1,"column":942}},{"source":"scripts/smoothing.js","name":"position","original":{"line":67,"column":17},"generated":{"line":1,"column":944}},{"source":"scripts/smoothing.js","name":"x","original":{"line":67,"column":26},"generated":{"line":1,"column":953}},{"source":"scripts/smoothing.js","original":{"line":67,"column":30},"generated":{"line":1,"column":956}},{"source":"scripts/smoothing.js","name":"getKeypoint","original":{"line":67,"column":30},"generated":{"line":1,"column":958}},{"source":"scripts/smoothing.js","original":{"line":67,"column":41},"generated":{"line":1,"column":960}},{"source":"scripts/smoothing.js","name":"originalPose","original":{"line":67,"column":42},"generated":{"line":1,"column":973}},{"source":"scripts/smoothing.js","name":"part","original":{"line":67,"column":56},"generated":{"line":1,"column":975}},{"source":"scripts/smoothing.js","name":"position","original":{"line":67,"column":62},"generated":{"line":1,"column":978}},{"source":"scripts/smoothing.js","name":"x","original":{"line":67,"column":71},"generated":{"line":1,"column":987}},{"source":"scripts/smoothing.js","name":"keypoint","original":{"line":68,"column":8},"generated":{"line":1,"column":989}},{"source":"scripts/smoothing.js","name":"position","original":{"line":68,"column":17},"generated":{"line":1,"column":991}},{"source":"scripts/smoothing.js","name":"y","original":{"line":68,"column":26},"generated":{"line":1,"column":1000}},{"source":"scripts/smoothing.js","original":{"line":68,"column":30},"generated":{"line":1,"column":1003}},{"source":"scripts/smoothing.js","name":"getKeypoint","original":{"line":68,"column":30},"generated":{"line":1,"column":1005}},{"source":"scripts/smoothing.js","original":{"line":68,"column":41},"generated":{"line":1,"column":1007}},{"source":"scripts/smoothing.js","name":"originalPose","original":{"line":68,"column":42},"generated":{"line":1,"column":1020}},{"source":"scripts/smoothing.js","name":"part","original":{"line":68,"column":56},"generated":{"line":1,"column":1022}},{"source":"scripts/smoothing.js","name":"position","original":{"line":68,"column":62},"generated":{"line":1,"column":1025}},{"source":"scripts/smoothing.js","name":"y","original":{"line":68,"column":71},"generated":{"line":1,"column":1034}},{"source":"scripts/smoothing.js","name":"jumpReset","original":{"line":71,"column":4},"generated":{"line":1,"column":1039}},{"source":"scripts/smoothing.js","name":"splice","original":{"line":71,"column":14},"generated":{"line":1,"column":1041}},{"source":"scripts/smoothing.js","name":"jumpReset","original":{"line":71,"column":21},"generated":{"line":1,"column":1048}},{"source":"scripts/smoothing.js","name":"indexOf","original":{"line":71,"column":31},"generated":{"line":1,"column":1050}},{"source":"scripts/smoothing.js","name":"part","original":{"line":71,"column":39},"generated":{"line":1,"column":1058}},{"source":"scripts/smoothing.js","original":{"line":71,"column":46},"generated":{"line":1,"column":1061}},{"source":"scripts/smoothing.js","name":"jumpPrevPose","original":{"line":74,"column":2},"generated":{"line":1,"column":1066}},{"source":"scripts/smoothing.js","name":"pose","original":{"line":74,"column":17},"generated":{"line":1,"column":1068}},{"source":"scripts/smoothing.js","name":"pose","original":{"line":75,"column":9},"generated":{"line":1,"column":1070}},{"source":"scripts/smoothing.js","original":{"line":81,"column":0},"generated":{"line":1,"column":1072}},{"source":"scripts/smoothing.js","name":"setUnjumpInterval","original":{"line":81,"column":9},"generated":{"line":1,"column":1081}},{"source":"scripts/smoothing.js","name":"setInterval","original":{"line":82,"column":2},"generated":{"line":1,"column":1085}},{"source":"scripts/smoothing.js","original":{"line":82,"column":14},"generated":{"line":1,"column":1097}},{"source":"scripts/smoothing.js","original":{"line":83,"column":4},"generated":{"line":1,"column":1108}},{"source":"scripts/smoothing.js","name":"prevPose","original":{"line":83,"column":10},"generated":{"line":1,"column":1112}},{"source":"scripts/smoothing.js","name":"jumpResetPose","original":{"line":83,"column":21},"generated":{"line":1,"column":1114}},{"source":"scripts/smoothing.js","name":"pose","original":{"line":84,"column":10},"generated":{"line":1,"column":1116}},{"source":"scripts/smoothing.js","name":"jumpPrevPose","original":{"line":84,"column":17},"generated":{"line":1,"column":1118}},{"source":"scripts/smoothing.js","original":{"line":86,"column":27},"generated":{"line":1,"column":1125}},{"source":"scripts/smoothing.js","name":"prevPose","original":{"line":86,"column":15},"generated":{"line":1,"column":1129}},{"source":"scripts/smoothing.js","name":"prevPose","original":{"line":86,"column":42},"generated":{"line":1,"column":1132}},{"source":"scripts/smoothing.js","name":"keypoints","original":{"line":86,"column":51},"generated":{"line":1,"column":1134}},{"source":"scripts/smoothing.js","original":{"line":86,"column":79},"generated":{"line":1,"column":1150}},{"source":"scripts/smoothing.js","name":"pose","original":{"line":86,"column":71},"generated":{"line":1,"column":1154}},{"source":"scripts/smoothing.js","name":"pose","original":{"line":86,"column":94},"generated":{"line":1,"column":1157}},{"source":"scripts/smoothing.js","name":"keypoints","original":{"line":86,"column":99},"generated":{"line":1,"column":1159}},{"source":"scripts/smoothing.js","name":"pose","original":{"line":87,"column":6},"generated":{"line":1,"column":1170}},{"source":"scripts/smoothing.js","name":"keypoints","original":{"line":87,"column":11},"generated":{"line":1,"column":1172}},{"source":"scripts/smoothing.js","name":"forEach","original":{"line":87,"column":21},"generated":{"line":1,"column":1182}},{"source":"scripts/smoothing.js","original":{"line":87,"column":29},"generated":{"line":1,"column":1190}},{"source":"scripts/smoothing.js","name":"keypoint","original":{"line":87,"column":30},"generated":{"line":1,"column":1199}},{"source":"scripts/smoothing.js","original":{"line":88,"column":8},"generated":{"line":1,"column":1202}},{"source":"scripts/smoothing.js","name":"prevKeypoint","original":{"line":88,"column":14},"generated":{"line":1,"column":1206}},{"source":"scripts/smoothing.js","original":{"line":88,"column":29},"generated":{"line":1,"column":1209}},{"source":"scripts/smoothing.js","name":"getKeypoint","original":{"line":88,"column":29},"generated":{"line":1,"column":1211}},{"source":"scripts/smoothing.js","original":{"line":88,"column":40},"generated":{"line":1,"column":1213}},{"source":"scripts/smoothing.js","name":"prevPose","original":{"line":88,"column":41},"generated":{"line":1,"column":1226}},{"source":"scripts/smoothing.js","name":"keypoint","original":{"line":88,"column":51},"generated":{"line":1,"column":1228}},{"source":"scripts/smoothing.js","name":"part","original":{"line":88,"column":60},"generated":{"line":1,"column":1230}},{"source":"scripts/smoothing.js","original":{"line":91,"column":25},"generated":{"line":1,"column":1236}},{"source":"scripts/smoothing.js","original":{"line":89,"column":25},"generated":{"line":1,"column":1241}},{"source":"scripts/smoothing.js","name":"getDistance","original":{"line":89,"column":25},"generated":{"line":1,"column":1243}},{"source":"scripts/smoothing.js","original":{"line":89,"column":36},"generated":{"line":1,"column":1245}},{"source":"scripts/smoothing.js","name":"keypoint","original":{"line":89,"column":37},"generated":{"line":1,"column":1258}},{"source":"scripts/smoothing.js","name":"position","original":{"line":89,"column":46},"generated":{"line":1,"column":1260}},{"source":"scripts/smoothing.js","name":"prevKeypoint","original":{"line":89,"column":56},"generated":{"line":1,"column":1269}},{"source":"scripts/smoothing.js","name":"position","original":{"line":89,"column":69},"generated":{"line":1,"column":1271}},{"source":"scripts/smoothing.js","name":"jumpReset","original":{"line":92,"column":10},"generated":{"line":1,"column":1282}},{"source":"scripts/smoothing.js","name":"push","original":{"line":92,"column":20},"generated":{"line":1,"column":1284}},{"source":"scripts/smoothing.js","name":"keypoint","original":{"line":92,"column":25},"generated":{"line":1,"column":1289}},{"source":"scripts/smoothing.js","name":"part","original":{"line":92,"column":34},"generated":{"line":1,"column":1291}},{"source":"scripts/smoothing.js","name":"jumpResetPose","original":{"line":97,"column":4},"generated":{"line":1,"column":1299}},{"source":"scripts/smoothing.js","name":"Object","original":{"line":97,"column":20},"generated":{"line":1,"column":1301}},{"source":"scripts/smoothing.js","name":"assign","original":{"line":97,"column":27},"generated":{"line":1,"column":1308}},{"source":"scripts/smoothing.js","original":{"line":97,"column":34},"generated":{"line":1,"column":1315}},{"source":"scripts/smoothing.js","name":"jumpPrevPose","original":{"line":97,"column":38},"generated":{"line":1,"column":1318}},{"source":"scripts/smoothing.js","name":"config","original":{"line":98,"column":5},"generated":{"line":1,"column":1322}},{"source":"scripts/smoothing.js","original":{"line":98,"column":11},"generated":{"line":1,"column":1324}},{"source":"scripts/smoothing.js","name":"smoothing","original":{"line":98,"column":12},"generated":{"line":1,"column":1332}},{"source":"scripts/smoothing.js","name":"jumpResetTime","original":{"line":98,"column":22},"generated":{"line":1,"column":1342}},{"source":"scripts/smoothing.js","original":{"line":103,"column":7},"generated":{"line":1,"column":1357}},{"source":"scripts/smoothing.js","name":"smoothNum","original":{"line":103,"column":16},"generated":{"line":1,"column":1366}},{"source":"scripts/smoothing.js","name":"num","original":{"line":103,"column":26},"generated":{"line":1,"column":1368}},{"source":"scripts/smoothing.js","name":"numSmoothing","original":{"line":103,"column":31},"generated":{"line":1,"column":1370}},{"source":"scripts/smoothing.js","original":{"line":104,"column":2},"generated":{"line":1,"column":1373}},{"source":"scripts/smoothing.js","name":"prevNum","original":{"line":104,"column":7},"generated":{"line":1,"column":1377}},{"source":"scripts/smoothing.js","original":{"line":104,"column":33},"generated":{"line":1,"column":1379}},{"source":"scripts/smoothing.js","name":"prevNum","original":{"line":104,"column":18},"generated":{"line":1,"column":1386}},{"source":"scripts/smoothing.js","name":"num","original":{"line":104,"column":28},"generated":{"line":1,"column":1388}},{"source":"scripts/smoothing.js","name":"num","original":{"line":104,"column":40},"generated":{"line":1,"column":1390}},{"source":"scripts/smoothing.js","original":{"line":105,"column":2},"generated":{"line":1,"column":1392}},{"source":"scripts/smoothing.js","name":"finalNum","original":{"line":105,"column":8},"generated":{"line":1,"column":1396}},{"source":"scripts/smoothing.js","name":"prevNum","original":{"line":105,"column":20},"generated":{"line":1,"column":1399}},{"source":"scripts/smoothing.js","name":"num","original":{"line":105,"column":30},"generated":{"line":1,"column":1401}},{"source":"scripts/smoothing.js","name":"numSmoothing","original":{"line":105,"column":38},"generated":{"line":1,"column":1404}},{"source":"scripts/smoothing.js","name":"num","original":{"line":105,"column":54},"generated":{"line":1,"column":1406}},{"source":"scripts/smoothing.js","original":{"line":108,"column":2},"generated":{"line":1,"column":1408}},{"source":"scripts/smoothing.js","name":"prevNum","original":{"line":106,"column":2},"generated":{"line":1,"column":1415}},{"source":"scripts/smoothing.js","name":"finalNum","original":{"line":106,"column":12},"generated":{"line":1,"column":1417}},{"source":"scripts/smoothing.js","name":"finalNum","original":{"line":107,"column":6},"generated":{"line":1,"column":1419}},{"source":"scripts/smoothing.js","name":"num","original":{"line":107,"column":19},"generated":{"line":1,"column":1423}},{"source":"scripts/smoothing.js","name":"console","original":{"line":107,"column":24},"generated":{"line":1,"column":1426}},{"source":"scripts/smoothing.js","name":"log","original":{"line":107,"column":32},"generated":{"line":1,"column":1434}},{"source":"scripts/smoothing.js","original":{"line":107,"column":36},"generated":{"line":1,"column":1438}},{"source":"scripts/smoothing.js","name":"finalNum","original":{"line":108,"column":9},"generated":{"line":1,"column":1450}},{"source":"scripts/smoothing.js","name":"config","original":{"line":80,"column":4},"generated":{"line":1,"column":1452}},{"source":"scripts/smoothing.js","original":{"line":80,"column":10},"generated":{"line":1,"column":1454}},{"source":"scripts/smoothing.js","name":"smoothing","original":{"line":80,"column":11},"generated":{"line":1,"column":1462}},{"source":"scripts/smoothing.js","name":"jumpDetection","original":{"line":80,"column":21},"generated":{"line":1,"column":1472}},{"source":"scripts/smoothing.js","name":"setUnjumpInterval","original":{"line":80,"column":36},"generated":{"line":1,"column":1487}}],"sources":{"scripts/smoothing.js":"import { getKeypoint, getDistance, getKeypoints, getPoseFromKeypoints } from './helpers';\nimport config from '../config';\n\nconst smoothing = config.smoothing.smoothing;\nlet smoothPrevPose;\n\n/* Prevent jumping, then smooth towards the average */\nexport function smooth(pose, armspan) {\n  if (config.smoothing.jumpDetection) pose = unjump(pose, armspan);\n  if (!smoothPrevPose) { smoothPrevPose = pose; return pose; }\n  \n  const keypoints = getKeypoints(pose);\n  const prevKeypoints = getKeypoints(smoothPrevPose);\n  const smoothKeypoints = keypoints;\n\n  Object.keys(keypoints).forEach((part) => {\n    const prevPos = prevKeypoints[part].position;\n    const smoothPos = smoothKeypoints[part].position;\n    const pos = keypoints[part].position;\n    \n    smoothPos.x = (prevPos.x - pos.x) * (smoothing) + pos.x;\n    smoothPos.y = (prevPos.y - pos.y) * (smoothing) + pos.y;\n  });\n\n  const smoothPose = getPoseFromKeypoints(smoothKeypoints);\n  smoothPose.score = pose.score;\n  smoothPrevPose = smoothPose;\n  return smoothPose;\n}\n\n/* If joints move too fast (they jump unrealistically) it's probably\n   a glitch. So ignore those movements. */\nlet jumpPrevPose;\nlet jumpReset = [];\nlet jumpResetPose;\nfunction unjump(pose, armspan) {\n  if (!jumpPrevPose) {\n    jumpPrevPose = pose;\n    return pose;\n  }\n\n  // Maximum valid movement distance (smaller = more agressive smoothing)\n  const maxDistance = config.smoothing.maxJumpRatio * armspan;\n  const smoothedKeypoints = [];\n\n  // Go over each keypoint, see if it's moved an unrealistic amount in one frame,\n  // and if so revert to previous position\n  pose.keypoints.forEach((keypoint) => {\n    const prevKeypoint = getKeypoint(jumpPrevPose, keypoint.part);\n    const distance = getDistance(keypoint.position, prevKeypoint.position);\n\n    if (distance > maxDistance) {\n      smoothedKeypoints.push(prevKeypoint);\n    } else {\n      smoothedKeypoints.push(keypoint);\n    }\n  });\n\n  const originalPose = Object.assign({}, pose);\n  pose.keypoints = smoothedKeypoints;\n\n  // Reset any parts that have been stuck\n  jumpReset.forEach((part) => {\n    const prevKeypoint = getKeypoint(jumpPrevPose, part);\n    pose.keypoints.forEach((keypoint) => {\n      if (keypoint.part === part) {\n        keypoint.position.x = getKeypoint(originalPose, part).position.x;\n        keypoint.position.y = getKeypoint(originalPose, part).position.y;\n      }\n    });\n    jumpReset.splice(jumpReset.indexOf(part), 1);\n  });\n\n  jumpPrevPose = pose;\n  return pose;\n}\n\n/* Sometimes the joints get stuck (legitimate fast movements,\n   or where joints get lost). Reset every x seconds in case of this. */\nif (config.smoothing.jumpDetection) setUnjumpInterval();\nfunction setUnjumpInterval() {\n  setInterval(() => {\n    const prevPose = jumpResetPose;\n    const pose = jumpPrevPose;\n\n    if (typeof prevPose != 'undefined' && prevPose.keypoints && typeof pose != 'undefined' && pose.keypoints) {\n      pose.keypoints.forEach((keypoint) => {\n        const prevKeypoint = getKeypoint(prevPose, keypoint.part)\n        const distance = getDistance(keypoint.position, prevKeypoint.position);\n\n        if (distance === 0) {\n          jumpReset.push(keypoint.part);\n        }\n      });\n    }\n\n    jumpResetPose = Object.assign({}, jumpPrevPose);\n  }, config.smoothing.jumpResetTime)\n}\n\n/* Smoothing for number values (tempo) */\nlet prevNum;\nexport function smoothNum(num, numSmoothing) {\n  if (!prevNum) { prevNum = num; return num; }\n  const finalNum = (prevNum - num) * (numSmoothing) + num;\n  prevNum = finalNum;\n  if (finalNum === num) console.log(\"DOINAOIN\")\n  return finalNum;\n}"},"lineCount":null}},"error":null,"hash":"e7a840096ac39f55f42df0442a5627f4","cacheData":{"env":{}}}