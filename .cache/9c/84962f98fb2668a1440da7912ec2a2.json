{"id":"fRpE","dependencies":[{"name":"C:\\Github\\Symphonic-AI\\node_modules\\pixi.js\\lib\\filters\\displacement\\DisplacementFilter.js.map","includedInParent":true,"mtime":1674916213218},{"name":"C:\\Github\\Symphonic-AI\\package.json","includedInParent":true,"mtime":1724703272135},{"name":"C:\\Github\\Symphonic-AI\\node_modules\\pixi.js\\package.json","includedInParent":true,"mtime":1674916212608},{"name":"../../core","loc":{"line":7,"column":20,"index":629},"parent":"C:\\Github\\Symphonic-AI\\node_modules\\pixi.js\\lib\\filters\\displacement\\DisplacementFilter.js","resolved":"C:\\Github\\Symphonic-AI\\node_modules\\pixi.js\\lib\\core\\index.js"},{"name":"path","loc":{"line":11,"column":20,"index":709},"parent":"C:\\Github\\Symphonic-AI\\node_modules\\pixi.js\\lib\\filters\\displacement\\DisplacementFilter.js","resolved":"C:\\Github\\Symphonic-AI\\node_modules\\path-browserify\\index.js"}],"generated":{"js":"\"use strict\";exports.__esModule=!0;var e=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),r=require(\"../../core\"),t=o(r),n=require(\"path\");function o(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function i(e,r){if(!(e instanceof r))throw new TypeError(\"Cannot call a class as a function\")}function a(e,r){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!r||\"object\"!=typeof r&&\"function\"!=typeof r?e:r}function u(e,r){if(\"function\"!=typeof r&&null!==r)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var l=function(r){function n(e,o){i(this,n);var u=new t.Matrix;e.renderable=!1;var l=a(this,r.call(this,\"attribute vec2 aVertexPosition;\\nattribute vec2 aTextureCoord;\\n\\nuniform mat3 projectionMatrix;\\nuniform mat3 filterMatrix;\\n\\nvarying vec2 vTextureCoord;\\nvarying vec2 vFilterCoord;\\n\\nvoid main(void)\\n{\\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\\n   vTextureCoord = aTextureCoord;\\n}\",\"varying vec2 vFilterCoord;\\nvarying vec2 vTextureCoord;\\n\\nuniform vec2 scale;\\n\\nuniform sampler2D uSampler;\\nuniform sampler2D mapSampler;\\n\\nuniform vec4 filterArea;\\nuniform vec4 filterClamp;\\n\\nvoid main(void)\\n{\\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\\n\\n  map -= 0.5;\\n  map.xy *= scale / filterArea.xy;\\n\\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\\n}\\n\"));return l.maskSprite=e,l.maskMatrix=u,l.uniforms.mapSampler=e._texture,l.uniforms.filterMatrix=u,l.uniforms.scale={x:1,y:1},null==o&&(o=20),l.scale=new t.Point(o,o),l}return u(n,r),n.prototype.apply=function(e,r,t){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y,e.applyFilter(this,r,t)},e(n,[{key:\"map\",get:function(){return this.uniforms.mapSampler},set:function(e){this.uniforms.mapSampler=e}}]),n}(t.Filter);exports.default=l;"},"sourceMaps":{"js":{"mappings":[{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":284}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":286}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":294}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"core","original":{"line":1,"column":12},"generated":{"line":1,"column":308}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":315}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":317}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":325}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"DisplacementFilter","original":{"line":16,"column":21},"generated":{"line":1,"column":1062}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":22,"column":4},"generated":{"line":1,"column":1076}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":22,"column":4},"generated":{"line":1,"column":1085}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"sprite","original":{"line":22,"column":16},"generated":{"line":1,"column":1087}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"scale","original":{"line":22,"column":24},"generated":{"line":1,"column":1089}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":23,"column":4},"generated":{"line":1,"column":1092}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":23,"column":4},"generated":{"line":1,"column":1094}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":23,"column":4},"generated":{"line":1,"column":1099}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":24,"column":8},"generated":{"line":1,"column":1102}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"maskMatrix","original":{"line":24,"column":14},"generated":{"line":1,"column":1106}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":24,"column":27},"generated":{"line":1,"column":1108}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"core","original":{"line":24,"column":31},"generated":{"line":1,"column":1112}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"Matrix","original":{"line":24,"column":36},"generated":{"line":1,"column":1114}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"sprite","original":{"line":26,"column":8},"generated":{"line":1,"column":1121}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"renderable","original":{"line":26,"column":15},"generated":{"line":1,"column":1123}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":26,"column":28},"generated":{"line":1,"column":1135}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":23,"column":4},"generated":{"line":1,"column":1137}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":23,"column":4},"generated":{"line":1,"column":1141}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":23,"column":4},"generated":{"line":1,"column":1143}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":23,"column":4},"generated":{"line":1,"column":1145}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":28,"column":8},"generated":{"line":1,"column":1150}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":28,"column":8},"generated":{"line":1,"column":1152}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":28,"column":8},"generated":{"line":1,"column":1157}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":28,"column":8},"generated":{"line":1,"column":1162}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":28,"column":8},"generated":{"line":1,"column":1563}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":23,"column":4},"generated":{"line":1,"column":2031}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":35,"column":8},"generated":{"line":1,"column":2038}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"maskSprite","original":{"line":35,"column":13},"generated":{"line":1,"column":2040}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"sprite","original":{"line":35,"column":26},"generated":{"line":1,"column":2051}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":36,"column":8},"generated":{"line":1,"column":2053}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"maskMatrix","original":{"line":36,"column":13},"generated":{"line":1,"column":2055}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"maskMatrix","original":{"line":36,"column":26},"generated":{"line":1,"column":2066}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":38,"column":8},"generated":{"line":1,"column":2068}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"uniforms","original":{"line":38,"column":13},"generated":{"line":1,"column":2070}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"mapSampler","original":{"line":38,"column":22},"generated":{"line":1,"column":2079}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"sprite","original":{"line":38,"column":35},"generated":{"line":1,"column":2090}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"_texture","original":{"line":38,"column":42},"generated":{"line":1,"column":2092}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":39,"column":8},"generated":{"line":1,"column":2101}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"uniforms","original":{"line":39,"column":13},"generated":{"line":1,"column":2103}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"filterMatrix","original":{"line":39,"column":22},"generated":{"line":1,"column":2112}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"maskMatrix","original":{"line":39,"column":37},"generated":{"line":1,"column":2125}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":40,"column":8},"generated":{"line":1,"column":2127}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"uniforms","original":{"line":40,"column":13},"generated":{"line":1,"column":2129}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"scale","original":{"line":40,"column":22},"generated":{"line":1,"column":2138}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":40,"column":30},"generated":{"line":1,"column":2144}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"x","original":{"line":40,"column":32},"generated":{"line":1,"column":2145}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":40,"column":35},"generated":{"line":1,"column":2147}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"y","original":{"line":40,"column":38},"generated":{"line":1,"column":2149}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":40,"column":41},"generated":{"line":1,"column":2151}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"scale","original":{"line":42,"column":12},"generated":{"line":1,"column":2154}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"scale","original":{"line":42,"column":12},"generated":{"line":1,"column":2160}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"scale","original":{"line":44,"column":12},"generated":{"line":1,"column":2164}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":44,"column":20},"generated":{"line":1,"column":2166}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":47,"column":8},"generated":{"line":1,"column":2170}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"scale","original":{"line":47,"column":13},"generated":{"line":1,"column":2172}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":47,"column":21},"generated":{"line":1,"column":2178}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"core","original":{"line":47,"column":25},"generated":{"line":1,"column":2182}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"Point","original":{"line":47,"column":30},"generated":{"line":1,"column":2184}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"scale","original":{"line":47,"column":36},"generated":{"line":1,"column":2190}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"scale","original":{"line":47,"column":43},"generated":{"line":1,"column":2192}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":23,"column":4},"generated":{"line":1,"column":2195}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"apply","original":{"line":57,"column":4},"generated":{"line":1,"column":2223}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"filterManager","original":{"line":57,"column":10},"generated":{"line":1,"column":2238}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"input","original":{"line":57,"column":25},"generated":{"line":1,"column":2240}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"output","original":{"line":57,"column":32},"generated":{"line":1,"column":2242}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":59,"column":8},"generated":{"line":1,"column":2245}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"uniforms","original":{"line":59,"column":13},"generated":{"line":1,"column":2250}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"filterMatrix","original":{"line":59,"column":22},"generated":{"line":1,"column":2259}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"filterManager","original":{"line":59,"column":37},"generated":{"line":1,"column":2272}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"calculateSpriteMatrix","original":{"line":59,"column":51},"generated":{"line":1,"column":2274}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":59,"column":73},"generated":{"line":1,"column":2296}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"maskMatrix","original":{"line":59,"column":78},"generated":{"line":1,"column":2301}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":59,"column":90},"generated":{"line":1,"column":2312}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"maskSprite","original":{"line":59,"column":95},"generated":{"line":1,"column":2317}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":60,"column":8},"generated":{"line":1,"column":2329}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"uniforms","original":{"line":60,"column":13},"generated":{"line":1,"column":2334}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"scale","original":{"line":60,"column":22},"generated":{"line":1,"column":2343}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"x","original":{"line":60,"column":28},"generated":{"line":1,"column":2349}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":60,"column":32},"generated":{"line":1,"column":2351}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"scale","original":{"line":60,"column":37},"generated":{"line":1,"column":2356}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"x","original":{"line":60,"column":43},"generated":{"line":1,"column":2362}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":61,"column":8},"generated":{"line":1,"column":2364}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"uniforms","original":{"line":61,"column":13},"generated":{"line":1,"column":2369}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"scale","original":{"line":61,"column":22},"generated":{"line":1,"column":2378}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"y","original":{"line":61,"column":28},"generated":{"line":1,"column":2384}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":61,"column":32},"generated":{"line":1,"column":2386}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"scale","original":{"line":61,"column":37},"generated":{"line":1,"column":2391}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"y","original":{"line":61,"column":43},"generated":{"line":1,"column":2397}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"filterManager","original":{"line":64,"column":8},"generated":{"line":1,"column":2399}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"applyFilter","original":{"line":64,"column":22},"generated":{"line":1,"column":2401}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":64,"column":34},"generated":{"line":1,"column":2413}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"input","original":{"line":64,"column":40},"generated":{"line":1,"column":2418}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"output","original":{"line":64,"column":47},"generated":{"line":1,"column":2420}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":74,"column":8},"generated":{"line":1,"column":2455}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":74,"column":15},"generated":{"line":1,"column":2462}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"uniforms","original":{"line":74,"column":20},"generated":{"line":1,"column":2467}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"mapSampler","original":{"line":74,"column":29},"generated":{"line":1,"column":2476}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"value","original":{"line":77,"column":12},"generated":{"line":1,"column":2501}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":null,"original":{"line":79,"column":8},"generated":{"line":1,"column":2504}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"uniforms","original":{"line":79,"column":13},"generated":{"line":1,"column":2509}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"mapSampler","original":{"line":79,"column":22},"generated":{"line":1,"column":2518}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"value","original":{"line":79,"column":35},"generated":{"line":1,"column":2529}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"core","original":{"line":16,"column":48},"generated":{"line":1,"column":2538}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"Filter","original":{"line":16,"column":53},"generated":{"line":1,"column":2540}},{"source":"../../../src/filters/displacement/DisplacementFilter.js","name":"DisplacementFilter","original":{"line":16,"column":21},"generated":{"line":1,"column":2564}}],"sources":{"../../../src/filters/displacement/DisplacementFilter.js":"import * as core from '../../core';\nimport { readFileSync } from 'fs';\nimport { join } from 'path';\n\n/**\n * The DisplacementFilter class uses the pixel values from the specified texture\n * (called the displacement map) to perform a displacement of an object. You can\n * use this filter to apply all manor of crazy warping effects. Currently the r\n * property of the texture is used to offset the x and the g property of the texture\n * is used to offset the y.\n *\n * @class\n * @extends PIXI.Filter\n * @memberof PIXI.filters\n */\nexport default class DisplacementFilter extends core.Filter\n{\n    /**\n     * @param {PIXI.Sprite} sprite - The sprite used for the displacement map. (make sure its added to the scene!)\n     * @param {number} scale - The scale of the displacement\n     */\n    constructor(sprite, scale)\n    {\n        const maskMatrix = new core.Matrix();\n\n        sprite.renderable = false;\n\n        super(\n            // vertex shader\n            readFileSync(join(__dirname, '../fragments/default-filter-matrix.vert'), 'utf8'),\n            // fragment shader\n            readFileSync(join(__dirname, './displacement.frag'), 'utf8')\n        );\n\n        this.maskSprite = sprite;\n        this.maskMatrix = maskMatrix;\n\n        this.uniforms.mapSampler = sprite._texture;\n        this.uniforms.filterMatrix = maskMatrix;\n        this.uniforms.scale = { x: 1, y: 1 };\n\n        if (scale === null || scale === undefined)\n        {\n            scale = 20;\n        }\n\n        this.scale = new core.Point(scale, scale);\n    }\n\n    /**\n     * Applies the filter.\n     *\n     * @param {PIXI.FilterManager} filterManager - The manager.\n     * @param {PIXI.RenderTarget} input - The input target.\n     * @param {PIXI.RenderTarget} output - The output target.\n     */\n    apply(filterManager, input, output)\n    {\n        this.uniforms.filterMatrix = filterManager.calculateSpriteMatrix(this.maskMatrix, this.maskSprite);\n        this.uniforms.scale.x = this.scale.x;\n        this.uniforms.scale.y = this.scale.y;\n\n         // draw the filter...\n        filterManager.applyFilter(this, input, output);\n    }\n\n    /**\n     * The texture used for the displacement map. Must be power of 2 sized texture.\n     *\n     * @member {PIXI.Texture}\n     */\n    get map()\n    {\n        return this.uniforms.mapSampler;\n    }\n\n    set map(value) // eslint-disable-line require-jsdoc\n    {\n        this.uniforms.mapSampler = value;\n    }\n}\n"},"lineCount":null}},"error":null,"hash":"618a76a78c9784f34a76531dee8c1eaa","cacheData":{"env":{}}}