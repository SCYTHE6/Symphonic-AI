{"id":"juli","dependencies":[{"name":"C:\\Github\\Symphonic-AI\\node_modules\\pixi.js\\lib\\core\\renderers\\webgl\\managers\\StencilManager.js.map","includedInParent":true,"mtime":1674916212898},{"name":"C:\\Github\\Symphonic-AI\\package.json","includedInParent":true,"mtime":1724703272135},{"name":"C:\\Github\\Symphonic-AI\\node_modules\\pixi.js\\package.json","includedInParent":true,"mtime":1674916212608},{"name":"./WebGLManager","loc":{"line":5,"column":29,"index":72},"parent":"C:\\Github\\Symphonic-AI\\node_modules\\pixi.js\\lib\\core\\renderers\\webgl\\managers\\StencilManager.js","resolved":"C:\\Github\\Symphonic-AI\\node_modules\\pixi.js\\lib\\core\\renderers\\webgl\\managers\\WebGLManager.js"}],"generated":{"js":"\"use strict\";exports.__esModule=!0;var e=require(\"./WebGLManager\"),t=r(e);function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function s(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function i(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=function(e){function r(t){n(this,r);var i=s(this,e.call(this,t));return i.stencilMaskStack=null,i}return i(r,e),r.prototype.setMaskStack=function(e){this.stencilMaskStack=e;var t=this.renderer.gl;0===e.length?t.disable(t.STENCIL_TEST):t.enable(t.STENCIL_TEST)},r.prototype.pushStencil=function(e){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var t=this.renderer.gl,r=this.stencilMaskStack.length;0===r&&t.enable(t.STENCIL_TEST),this.stencilMaskStack.push(e),t.colorMask(!1,!1,!1,!1),t.stencilFunc(t.EQUAL,r,this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.INCR),this.renderer.plugins.graphics.render(e),this._useCurrent()},r.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var e=this.renderer.gl,t=this.stencilMaskStack.pop();0===this.stencilMaskStack.length?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),this.renderer.plugins.graphics.render(t),this._useCurrent())},r.prototype._useCurrent=function(){var e=this.renderer.gl;e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.EQUAL,this.stencilMaskStack.length,this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},r.prototype._getBitwiseMask=function(){return(1<<this.stencilMaskStack.length)-1},r.prototype.destroy=function(){t.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},r}(t.default);exports.default=c;"},"sourceMaps":{"js":{"mappings":[{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":35}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":39}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":41}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":49}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"StencilManager","original":{"line":8,"column":21},"generated":{"line":1,"column":701}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":13,"column":4},"generated":{"line":1,"column":715}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":13,"column":4},"generated":{"line":1,"column":724}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"renderer","original":{"line":13,"column":16},"generated":{"line":1,"column":726}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":14,"column":4},"generated":{"line":1,"column":729}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":14,"column":4},"generated":{"line":1,"column":731}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":14,"column":4},"generated":{"line":1,"column":736}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":14,"column":4},"generated":{"line":1,"column":739}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":14,"column":4},"generated":{"line":1,"column":743}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":14,"column":4},"generated":{"line":1,"column":745}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":14,"column":4},"generated":{"line":1,"column":747}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":15,"column":8},"generated":{"line":1,"column":752}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":15,"column":8},"generated":{"line":1,"column":754}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":15,"column":8},"generated":{"line":1,"column":759}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"renderer","original":{"line":15,"column":14},"generated":{"line":1,"column":764}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":14,"column":4},"generated":{"line":1,"column":768}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":16,"column":8},"generated":{"line":1,"column":775}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"stencilMaskStack","original":{"line":16,"column":13},"generated":{"line":1,"column":777}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":16,"column":32},"generated":{"line":1,"column":794}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":14,"column":4},"generated":{"line":1,"column":799}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"setMaskStack","original":{"line":24,"column":4},"generated":{"line":1,"column":827}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"stencilMaskStack","original":{"line":24,"column":17},"generated":{"line":1,"column":849}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":26,"column":8},"generated":{"line":1,"column":852}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"stencilMaskStack","original":{"line":26,"column":13},"generated":{"line":1,"column":857}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"stencilMaskStack","original":{"line":26,"column":32},"generated":{"line":1,"column":874}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":28,"column":8},"generated":{"line":1,"column":876}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"gl","original":{"line":28,"column":14},"generated":{"line":1,"column":880}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":28,"column":19},"generated":{"line":1,"column":882}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"renderer","original":{"line":28,"column":24},"generated":{"line":1,"column":887}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"gl","original":{"line":28,"column":33},"generated":{"line":1,"column":896}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":30,"column":40},"generated":{"line":1,"column":899}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"stencilMaskStack","original":{"line":30,"column":12},"generated":{"line":1,"column":903}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"length","original":{"line":30,"column":29},"generated":{"line":1,"column":905}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"gl","original":{"line":32,"column":12},"generated":{"line":1,"column":912}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"disable","original":{"line":32,"column":15},"generated":{"line":1,"column":914}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"gl","original":{"line":32,"column":23},"generated":{"line":1,"column":922}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"STENCIL_TEST","original":{"line":32,"column":26},"generated":{"line":1,"column":924}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"gl","original":{"line":36,"column":12},"generated":{"line":1,"column":938}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"enable","original":{"line":36,"column":15},"generated":{"line":1,"column":940}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"gl","original":{"line":36,"column":22},"generated":{"line":1,"column":947}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"STENCIL_TEST","original":{"line":36,"column":25},"generated":{"line":1,"column":949}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"pushStencil","original":{"line":45,"column":4},"generated":{"line":1,"column":976}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"graphics","original":{"line":45,"column":16},"generated":{"line":1,"column":997}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":47,"column":8},"generated":{"line":1,"column":1000}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"renderer","original":{"line":47,"column":13},"generated":{"line":1,"column":1005}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"setObjectRenderer","original":{"line":47,"column":22},"generated":{"line":1,"column":1014}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":47,"column":40},"generated":{"line":1,"column":1032}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"renderer","original":{"line":47,"column":45},"generated":{"line":1,"column":1037}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"plugins","original":{"line":47,"column":54},"generated":{"line":1,"column":1046}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"graphics","original":{"line":47,"column":62},"generated":{"line":1,"column":1054}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":49,"column":8},"generated":{"line":1,"column":1064}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"renderer","original":{"line":49,"column":13},"generated":{"line":1,"column":1069}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"_activeRenderTarget","original":{"line":49,"column":22},"generated":{"line":1,"column":1078}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"attachStencilBuffer","original":{"line":49,"column":42},"generated":{"line":1,"column":1098}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":51,"column":8},"generated":{"line":1,"column":1120}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"gl","original":{"line":51,"column":14},"generated":{"line":1,"column":1124}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":51,"column":19},"generated":{"line":1,"column":1126}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"renderer","original":{"line":51,"column":24},"generated":{"line":1,"column":1131}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"gl","original":{"line":51,"column":33},"generated":{"line":1,"column":1140}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"prevMaskCount","original":{"line":52,"column":14},"generated":{"line":1,"column":1143}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":52,"column":30},"generated":{"line":1,"column":1145}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"stencilMaskStack","original":{"line":52,"column":35},"generated":{"line":1,"column":1150}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"length","original":{"line":52,"column":52},"generated":{"line":1,"column":1167}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":54,"column":30},"generated":{"line":1,"column":1174}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"prevMaskCount","original":{"line":54,"column":12},"generated":{"line":1,"column":1178}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"gl","original":{"line":56,"column":12},"generated":{"line":1,"column":1181}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"enable","original":{"line":56,"column":15},"generated":{"line":1,"column":1183}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"gl","original":{"line":56,"column":22},"generated":{"line":1,"column":1190}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"STENCIL_TEST","original":{"line":56,"column":25},"generated":{"line":1,"column":1192}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":59,"column":8},"generated":{"line":1,"column":1206}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"stencilMaskStack","original":{"line":59,"column":13},"generated":{"line":1,"column":1211}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"push","original":{"line":59,"column":30},"generated":{"line":1,"column":1228}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"graphics","original":{"line":59,"column":35},"generated":{"line":1,"column":1233}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"gl","original":{"line":62,"column":8},"generated":{"line":1,"column":1236}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"colorMask","original":{"line":62,"column":11},"generated":{"line":1,"column":1238}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":62,"column":21},"generated":{"line":1,"column":1249}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":62,"column":28},"generated":{"line":1,"column":1252}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":62,"column":35},"generated":{"line":1,"column":1255}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":62,"column":42},"generated":{"line":1,"column":1258}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"gl","original":{"line":63,"column":8},"generated":{"line":1,"column":1261}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"stencilFunc","original":{"line":63,"column":11},"generated":{"line":1,"column":1263}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"gl","original":{"line":63,"column":23},"generated":{"line":1,"column":1275}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"EQUAL","original":{"line":63,"column":26},"generated":{"line":1,"column":1277}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"prevMaskCount","original":{"line":63,"column":33},"generated":{"line":1,"column":1283}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":63,"column":48},"generated":{"line":1,"column":1285}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"_getBitwiseMask","original":{"line":63,"column":53},"generated":{"line":1,"column":1290}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"gl","original":{"line":64,"column":8},"generated":{"line":1,"column":1309}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"stencilOp","original":{"line":64,"column":11},"generated":{"line":1,"column":1311}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"gl","original":{"line":64,"column":21},"generated":{"line":1,"column":1321}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"KEEP","original":{"line":64,"column":24},"generated":{"line":1,"column":1323}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"gl","original":{"line":64,"column":30},"generated":{"line":1,"column":1328}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"KEEP","original":{"line":64,"column":33},"generated":{"line":1,"column":1330}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"gl","original":{"line":64,"column":39},"generated":{"line":1,"column":1335}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"INCR","original":{"line":64,"column":42},"generated":{"line":1,"column":1337}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":65,"column":8},"generated":{"line":1,"column":1343}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"renderer","original":{"line":65,"column":13},"generated":{"line":1,"column":1348}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"plugins","original":{"line":65,"column":22},"generated":{"line":1,"column":1357}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"graphics","original":{"line":65,"column":30},"generated":{"line":1,"column":1365}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"render","original":{"line":65,"column":39},"generated":{"line":1,"column":1374}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"graphics","original":{"line":65,"column":46},"generated":{"line":1,"column":1381}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":67,"column":8},"generated":{"line":1,"column":1384}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"_useCurrent","original":{"line":67,"column":13},"generated":{"line":1,"column":1389}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"popStencil","original":{"line":73,"column":4},"generated":{"line":1,"column":1416}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":75,"column":8},"generated":{"line":1,"column":1438}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"renderer","original":{"line":75,"column":13},"generated":{"line":1,"column":1443}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"setObjectRenderer","original":{"line":75,"column":22},"generated":{"line":1,"column":1452}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":75,"column":40},"generated":{"line":1,"column":1470}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"renderer","original":{"line":75,"column":45},"generated":{"line":1,"column":1475}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"plugins","original":{"line":75,"column":54},"generated":{"line":1,"column":1484}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"graphics","original":{"line":75,"column":62},"generated":{"line":1,"column":1492}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":77,"column":8},"generated":{"line":1,"column":1502}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"gl","original":{"line":77,"column":14},"generated":{"line":1,"column":1506}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":77,"column":19},"generated":{"line":1,"column":1508}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"renderer","original":{"line":77,"column":24},"generated":{"line":1,"column":1513}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"gl","original":{"line":77,"column":33},"generated":{"line":1,"column":1522}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"graphics","original":{"line":78,"column":14},"generated":{"line":1,"column":1525}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":78,"column":25},"generated":{"line":1,"column":1527}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"stencilMaskStack","original":{"line":78,"column":30},"generated":{"line":1,"column":1532}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"pop","original":{"line":78,"column":47},"generated":{"line":1,"column":1549}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":80,"column":45},"generated":{"line":1,"column":1555}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":80,"column":12},"generated":{"line":1,"column":1559}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"stencilMaskStack","original":{"line":80,"column":17},"generated":{"line":1,"column":1564}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"length","original":{"line":80,"column":34},"generated":{"line":1,"column":1581}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"gl","original":{"line":83,"column":12},"generated":{"line":1,"column":1589}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"disable","original":{"line":83,"column":15},"generated":{"line":1,"column":1591}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"gl","original":{"line":83,"column":23},"generated":{"line":1,"column":1599}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"STENCIL_TEST","original":{"line":83,"column":26},"generated":{"line":1,"column":1601}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"gl","original":{"line":84,"column":12},"generated":{"line":1,"column":1615}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"clear","original":{"line":84,"column":15},"generated":{"line":1,"column":1617}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"gl","original":{"line":84,"column":21},"generated":{"line":1,"column":1623}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"STENCIL_BUFFER_BIT","original":{"line":84,"column":24},"generated":{"line":1,"column":1625}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"gl","original":{"line":85,"column":12},"generated":{"line":1,"column":1645}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"clearStencil","original":{"line":85,"column":15},"generated":{"line":1,"column":1647}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":85,"column":28},"generated":{"line":1,"column":1660}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"gl","original":{"line":90,"column":12},"generated":{"line":1,"column":1665}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"colorMask","original":{"line":90,"column":15},"generated":{"line":1,"column":1667}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":90,"column":25},"generated":{"line":1,"column":1678}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":90,"column":32},"generated":{"line":1,"column":1681}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":90,"column":39},"generated":{"line":1,"column":1684}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":90,"column":46},"generated":{"line":1,"column":1687}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"gl","original":{"line":91,"column":12},"generated":{"line":1,"column":1690}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"stencilOp","original":{"line":91,"column":15},"generated":{"line":1,"column":1692}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"gl","original":{"line":91,"column":25},"generated":{"line":1,"column":1702}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"KEEP","original":{"line":91,"column":28},"generated":{"line":1,"column":1704}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"gl","original":{"line":91,"column":34},"generated":{"line":1,"column":1709}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"KEEP","original":{"line":91,"column":37},"generated":{"line":1,"column":1711}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"gl","original":{"line":91,"column":43},"generated":{"line":1,"column":1716}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"DECR","original":{"line":91,"column":46},"generated":{"line":1,"column":1718}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":92,"column":12},"generated":{"line":1,"column":1724}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"renderer","original":{"line":92,"column":17},"generated":{"line":1,"column":1729}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"plugins","original":{"line":92,"column":26},"generated":{"line":1,"column":1738}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"graphics","original":{"line":92,"column":34},"generated":{"line":1,"column":1746}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"render","original":{"line":92,"column":43},"generated":{"line":1,"column":1755}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"graphics","original":{"line":92,"column":50},"generated":{"line":1,"column":1762}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":94,"column":12},"generated":{"line":1,"column":1765}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"_useCurrent","original":{"line":94,"column":17},"generated":{"line":1,"column":1770}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"_useCurrent","original":{"line":101,"column":4},"generated":{"line":1,"column":1798}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":103,"column":8},"generated":{"line":1,"column":1821}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"gl","original":{"line":103,"column":14},"generated":{"line":1,"column":1825}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":103,"column":19},"generated":{"line":1,"column":1827}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"renderer","original":{"line":103,"column":24},"generated":{"line":1,"column":1832}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"gl","original":{"line":103,"column":33},"generated":{"line":1,"column":1841}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"gl","original":{"line":105,"column":8},"generated":{"line":1,"column":1844}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"colorMask","original":{"line":105,"column":11},"generated":{"line":1,"column":1846}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":105,"column":21},"generated":{"line":1,"column":1857}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":105,"column":27},"generated":{"line":1,"column":1860}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":105,"column":33},"generated":{"line":1,"column":1863}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":105,"column":39},"generated":{"line":1,"column":1866}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"gl","original":{"line":106,"column":8},"generated":{"line":1,"column":1869}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"stencilFunc","original":{"line":106,"column":11},"generated":{"line":1,"column":1871}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"gl","original":{"line":106,"column":23},"generated":{"line":1,"column":1883}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"EQUAL","original":{"line":106,"column":26},"generated":{"line":1,"column":1885}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":106,"column":33},"generated":{"line":1,"column":1891}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"stencilMaskStack","original":{"line":106,"column":38},"generated":{"line":1,"column":1896}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"length","original":{"line":106,"column":55},"generated":{"line":1,"column":1913}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":106,"column":63},"generated":{"line":1,"column":1920}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"_getBitwiseMask","original":{"line":106,"column":68},"generated":{"line":1,"column":1925}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"gl","original":{"line":107,"column":8},"generated":{"line":1,"column":1944}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"stencilOp","original":{"line":107,"column":11},"generated":{"line":1,"column":1946}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"gl","original":{"line":107,"column":21},"generated":{"line":1,"column":1956}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"KEEP","original":{"line":107,"column":24},"generated":{"line":1,"column":1958}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"gl","original":{"line":107,"column":30},"generated":{"line":1,"column":1963}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"KEEP","original":{"line":107,"column":33},"generated":{"line":1,"column":1965}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"gl","original":{"line":107,"column":39},"generated":{"line":1,"column":1970}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"KEEP","original":{"line":107,"column":42},"generated":{"line":1,"column":1972}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"_getBitwiseMask","original":{"line":115,"column":4},"generated":{"line":1,"column":1991}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":117,"column":8},"generated":{"line":1,"column":2018}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":117,"column":16},"generated":{"line":1,"column":2025}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":117,"column":21},"generated":{"line":1,"column":2028}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"stencilMaskStack","original":{"line":117,"column":26},"generated":{"line":1,"column":2033}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"length","original":{"line":117,"column":43},"generated":{"line":1,"column":2050}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":117,"column":53},"generated":{"line":1,"column":2058}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"destroy","original":{"line":124,"column":4},"generated":{"line":1,"column":2073}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":126,"column":8},"generated":{"line":1,"column":2092}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":126,"column":8},"generated":{"line":1,"column":2094}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"prototype","original":{"line":126,"column":21},"generated":{"line":1,"column":2102}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"destroy","original":{"line":126,"column":31},"generated":{"line":1,"column":2112}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"call","original":{"line":126,"column":39},"generated":{"line":1,"column":2120}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":126,"column":44},"generated":{"line":1,"column":2125}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":128,"column":8},"generated":{"line":1,"column":2131}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"stencilMaskStack","original":{"line":128,"column":13},"generated":{"line":1,"column":2136}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"stencilStack","original":{"line":128,"column":30},"generated":{"line":1,"column":2153}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":null,"original":{"line":128,"column":45},"generated":{"line":1,"column":2166}},{"source":"../../../../../src/core/renderers/webgl/managers/StencilManager.js","name":"StencilManager","original":{"line":8,"column":21},"generated":{"line":1,"column":2202}}],"sources":{"../../../../../src/core/renderers/webgl/managers/StencilManager.js":"import WebGLManager from './WebGLManager';\n\n/**\n * @class\n * @extends PIXI.WebGLManager\n * @memberof PIXI\n */\nexport default class StencilManager extends WebGLManager\n{\n    /**\n     * @param {PIXI.WebGLRenderer} renderer - The renderer this manager works for.\n     */\n    constructor(renderer)\n    {\n        super(renderer);\n        this.stencilMaskStack = null;\n    }\n\n    /**\n     * Changes the mask stack that is used by this manager.\n     *\n     * @param {PIXI.Graphics[]} stencilMaskStack - The mask stack\n     */\n    setMaskStack(stencilMaskStack)\n    {\n        this.stencilMaskStack = stencilMaskStack;\n\n        const gl = this.renderer.gl;\n\n        if (stencilMaskStack.length === 0)\n        {\n            gl.disable(gl.STENCIL_TEST);\n        }\n        else\n        {\n            gl.enable(gl.STENCIL_TEST);\n        }\n    }\n\n    /**\n     * Applies the Mask and adds it to the current stencil stack. @alvin\n     *\n     * @param {PIXI.Graphics} graphics - The mask\n     */\n    pushStencil(graphics)\n    {\n        this.renderer.setObjectRenderer(this.renderer.plugins.graphics);\n\n        this.renderer._activeRenderTarget.attachStencilBuffer();\n\n        const gl = this.renderer.gl;\n        const prevMaskCount = this.stencilMaskStack.length;\n\n        if (prevMaskCount === 0)\n        {\n            gl.enable(gl.STENCIL_TEST);\n        }\n\n        this.stencilMaskStack.push(graphics);\n\n        // Increment the reference stencil value where the new mask overlaps with the old ones.\n        gl.colorMask(false, false, false, false);\n        gl.stencilFunc(gl.EQUAL, prevMaskCount, this._getBitwiseMask());\n        gl.stencilOp(gl.KEEP, gl.KEEP, gl.INCR);\n        this.renderer.plugins.graphics.render(graphics);\n\n        this._useCurrent();\n    }\n\n    /**\n     * Removes the last mask from the stencil stack. @alvin\n     */\n    popStencil()\n    {\n        this.renderer.setObjectRenderer(this.renderer.plugins.graphics);\n\n        const gl = this.renderer.gl;\n        const graphics = this.stencilMaskStack.pop();\n\n        if (this.stencilMaskStack.length === 0)\n        {\n            // the stack is empty!\n            gl.disable(gl.STENCIL_TEST);\n            gl.clear(gl.STENCIL_BUFFER_BIT);\n            gl.clearStencil(0);\n        }\n        else\n        {\n            // Decrement the reference stencil value where the popped mask overlaps with the other ones\n            gl.colorMask(false, false, false, false);\n            gl.stencilOp(gl.KEEP, gl.KEEP, gl.DECR);\n            this.renderer.plugins.graphics.render(graphics);\n\n            this._useCurrent();\n        }\n    }\n\n    /**\n     * Setup renderer to use the current stencil data.\n     */\n    _useCurrent()\n    {\n        const gl = this.renderer.gl;\n\n        gl.colorMask(true, true, true, true);\n        gl.stencilFunc(gl.EQUAL, this.stencilMaskStack.length, this._getBitwiseMask());\n        gl.stencilOp(gl.KEEP, gl.KEEP, gl.KEEP);\n    }\n\n    /**\n     * Fill 1s equal to the number of acitve stencil masks.\n     *\n     * @return {number} The bitwise mask.\n     */\n    _getBitwiseMask()\n    {\n        return (1 << this.stencilMaskStack.length) - 1;\n    }\n\n    /**\n     * Destroys the mask stack.\n     *\n     */\n    destroy()\n    {\n        WebGLManager.prototype.destroy.call(this);\n\n        this.stencilMaskStack.stencilStack = null;\n    }\n}\n"},"lineCount":null}},"error":null,"hash":"a2e358f0dbeebe97cd4069115a3bda66","cacheData":{"env":{}}}